<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Mybatis学习笔记' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Mybatis学习笔记</center></div><div class='banquan'>原文出处:本文由博客园博主jpanda提供。<br/>
原文连接:https://www.cnblogs.com/jpanda/p/11496893.html</div><br>
    <src class="cnblogs_code">
<pre><code>时间：2019-09-10</code></pre>
<p><span style="font-size: 14pt;">一、Maven环境搭建</span></p>
<p>　　<span style="font-size: 18px;">1.导入jar坐标</span></p>
<pre><code><span style="color: #008080;"> 1</span>  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">dependencies</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 2</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">dependency</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 3</span>       <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">groupId</span><span style="color: #0000ff;">&gt;</span>junit<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">groupId</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 4</span>       <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">artifactId</span><span style="color: #0000ff;">&gt;</span>junit<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">artifactId</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 5</span>       <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">version</span><span style="color: #0000ff;">&gt;</span>4.11<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">version</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 6</span>       <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">scope</span><span style="color: #0000ff;">&gt;</span>test<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">scope</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">dependency</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 8</span>   
<span style="color: #008080;"> 9</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">dependency</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">10</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">groupId</span><span style="color: #0000ff;">&gt;</span>org.mybatis<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">groupId</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">11</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">artifactId</span><span style="color: #0000ff;">&gt;</span>mybatis<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">artifactId</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">12</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">version</span><span style="color: #0000ff;">&gt;</span>3.4.5<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">version</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">13</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">dependency</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">14</span> 
<span style="color: #008080;">15</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">dependency</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">16</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">groupId</span><span style="color: #0000ff;">&gt;</span>log4j<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">groupId</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">17</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">artifactId</span><span style="color: #0000ff;">&gt;</span>log4j<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">artifactId</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">18</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">version</span><span style="color: #0000ff;">&gt;</span>1.2.12<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">version</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">19</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">dependency</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">20</span> 
<span style="color: #008080;">21</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">dependency</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">22</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">groupId</span><span style="color: #0000ff;">&gt;</span>mysql<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">groupId</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">23</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">artifactId</span><span style="color: #0000ff;">&gt;</span>mysql-connector-java<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">artifactId</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">24</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">version</span><span style="color: #0000ff;">&gt;</span>5.1.32<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">version</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">25</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">dependency</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">26</span>  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">dependencies</span><span style="color: #0000ff;">&gt;<br />　　<br />　<br /> <br /></span><span style="font-size: 18px;"> 2.db.properties数据库连接配置(根据个人具体情况书写)</span></code></pre>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;">1</span> <span style="color: #000000;">jdbc.driver=com.mysql.jdbc.Driver
</span><span style="color: #008080;">2</span> <span style="color: #000000;">jdbc.url=jdbc:mysql://localhost:3307/user
</span><span style="color: #008080;">3</span> <span style="color: #000000;">jdbc.username=root
</span><span style="color: #008080;">4</span> jdbc.password=root</code></pre>

<pre><code> <br /><span style="font-size: 18px;"> 3.创建目录结构</span></code></pre>
<pre><code><span style="color: #0000ff;"><img src="./images/Mybatis学习笔记0.png" alt="" /></span></code></pre>
<pre><code><span style="font-size: 18px;">4.创建数据库表</span><br /><span style="font-size: 18px;"> ①emp</span><br />　　</code></pre>
<img src="./images/Mybatis学习笔记1.png" alt="" />
<p><span style="font-size: 18px;">　 ②dep</span></p>
<p><img src="./images/Mybatis学习笔记2.png" alt="" width="510" height="114" /></p>
<p>&nbsp;</p>
<p><span style="font-size: 14pt;">二、配置文件</span></p>
<pre><code><span style="font-size: 18px;">1.全局配置文件mybatis-config.xml</span></code></pre>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">&lt;?</span><span style="color: #ff00ff;">xml version="1.0" encoding="UTF-8" </span><span style="color: #0000ff;">?&gt;</span>
<span style="color: #008080;"> 2</span> <span style="color: #0000ff;">&lt;!</span><span style="color: #ff00ff;">DOCTYPE configuration
</span><span style="color: #008080;"> 3</span> <span style="color: #ff00ff;">PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
</span><span style="color: #008080;"> 4</span> <span style="color: #ff00ff;">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 5</span> 
<span style="color: #008080;"> 6</span> <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 自动代码提示设置 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 7</span> <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> preferences&rarr;XMLCatlog&rarr;add(Location=本地文件路径,KeyType=UID,Key=上面连接) </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 8</span> <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 全局配置文件(前后顺序需要按照规定来) </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 9</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">configuration</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">10</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 属性配置 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">11</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> resource="src类路径下配置文件名" </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">12</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> uri="网络路径路径下配置文件名" </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">13</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">properties </span><span style="color: #ff0000;">resource</span><span style="color: #0000ff;">="db.properties"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">14</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> name="k" </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">15</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> value="v" </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">16</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="k"</span><span style="color: #ff0000;"> value</span><span style="color: #0000ff;">="v"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">17</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">properties</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">18</span> 
<span style="color: #008080;">19</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 设置配置 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">20</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">settings</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">21</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 内容过多，详细参考官方文档 http://www.mybatis.org/mybatis-3 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">22</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 开启缓存机制 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">23</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">setting </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="cacheEnabled"</span><span style="color: #ff0000;"> value</span><span style="color: #0000ff;">="true"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">24</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 开启延迟加载 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">25</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">setting </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="lazyLoadingEnabled"</span><span style="color: #ff0000;"> value</span><span style="color: #0000ff;">="true"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">26</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 关闭主动延迟加载，即按照需求进行延迟加载 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">27</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">setting </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="aggressiveLazyLoading"</span><span style="color: #ff0000;"> value</span><span style="color: #0000ff;">="false"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">28</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">settings</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">29</span> 
<span style="color: #008080;">30</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 别名设置 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">31</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">typeAliases</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">32</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> type="java全限定类名" </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">33</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> alias="别名(默认为类名，不区分大小写)" </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">34</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">typeAlias </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="com.panda.beans.Emp"</span><span style="color: #ff0000;"> alias</span><span style="color: #0000ff;">="Emp"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">35</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 为整个包下的类取别名(类名)，有重复则对重复部分单独命名 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">36</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">package </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="com.panda.beans"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">37</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">typeAliases</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">38</span> 
<span style="color: #008080;">39</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 环境配置 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">40</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> default="默认id对应的数据库配置环境" </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">41</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">environments </span><span style="color: #ff0000;">default</span><span style="color: #0000ff;">="mysql"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">42</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 与default对应 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">43</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">environment </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="mysql"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">44</span>             <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 事务管理器 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">45</span>             <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> "JDBC", JdbcTransactionFactory.class </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">46</span>             <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> Spring解决 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">47</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">transactionManager </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="JDBC"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">48</span>             <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 数据源 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">49</span>             <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> "POOLED", PooledDataSourceFactory.class </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">50</span>             <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> "UNPOOLED", UnpooledDataSourceFactory.class </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">51</span>             <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> "JNDI", JndiDataSourceFactory.class </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">52</span>             <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> Spring解决 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">53</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">dataSource </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="POOLED"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">54</span>                 <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 数据库配置信息 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">55</span>                 <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="driver"</span><span style="color: #ff0000;"> value</span><span style="color: #0000ff;">="${jdbc.driver}"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">56</span>                 <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="url"</span><span style="color: #ff0000;"> value</span><span style="color: #0000ff;">="${jdbc.url}"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">57</span>                 <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="username"</span><span style="color: #ff0000;"> value</span><span style="color: #0000ff;">="${jdbc.username}"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">58</span>                 <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="password"</span><span style="color: #ff0000;"> value</span><span style="color: #0000ff;">="${jdbc.password}"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">59</span>             <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">dataSource</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">60</span>         <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">environment</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">61</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">environments</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">62</span> 
<span style="color: #008080;">63</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 映射配置 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">64</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">mappers</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">65</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> resource="src类路径下配置文件名" </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">66</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> uri="网络路径路径下配置文件名" </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">67</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> class="注解时指定dao全限定类路径" </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">68</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> &lt;mapper resource="EmpDao.xml" /&gt; 适用于单个测试 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">69</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> &lt;mapper resource="com/panda/dao/EmpDao.xml" /&gt; </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">70</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> package=dao(接口类存放包) </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">71</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 注意：1.使用package时config文件和dao文件必须同目录同名存放(平行包结构) </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">72</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">package </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="com.panda.dao"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">73</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">mappers</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">74</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">configuration</span><span style="color: #0000ff;">&gt;</span></code></pre>

<pre><code><span style="font-size: 18px;">2.Sql配置文件EmpDao.xml(非动态sql)</span></code></pre>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;">  1</span> <span style="color: #0000ff;">&lt;?</span><span style="color: #ff00ff;">xml version="1.0" encoding="UTF-8" </span><span style="color: #0000ff;">?&gt;</span>
<span style="color: #008080;">  2</span> <span style="color: #0000ff;">&lt;!</span><span style="color: #ff00ff;">DOCTYPE mapper
</span><span style="color: #008080;">  3</span> <span style="color: #ff00ff;">PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
</span><span style="color: #008080;">  4</span> <span style="color: #ff00ff;">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">  5</span> 
<span style="color: #008080;">  6</span> <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 自动代码提示设置 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">  7</span> <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> preferences&rarr;XMLCatlog&rarr;add(Location=本地文件路径,KeyType=UID,Key=上面连接) </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">  8</span> <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> namespace为dao/mapper全限定路径 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">  9</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">mapper </span><span style="color: #ff0000;">namespace</span><span style="color: #0000ff;">="com.panda.dao.EmpDao"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 10</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> id对应接口里的方法名 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 11</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> parameterType对应传入参数类型，可以省略Mybatis自行推断 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 12</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> resultType对应返回值类型，当返回集合时，返回值类型为集合中的单个对象类型 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 13</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 使用insert，update，delete时候需要selSession.commite() </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 14</span> 
<span style="color: #008080;"> 15</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 逻辑运算符的书写规则 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 16</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 原符号 &lt; &lt;= &gt; &gt;= &amp; ' " </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 17</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 替换符号 &amp;lt; &amp;lt;= &amp;gt; &amp;gt;= &amp;amp; &amp;apos; &amp;quot; </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 18</span> 
<span style="color: #008080;"> 19</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 获取参数方式1：#{}预编译sql </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 20</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 获取参数方式2：${}拼接sql，存在sql注入问题 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 21</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 原生jdbc不支持占位符的地方(选取字段，表名，条件字段)必须使用${} </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 22</span> 
<span style="color: #008080;"> 23</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> type：结果最终封装类型 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 24</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> id： 连接resultMap属性的唯一标识符 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 25</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">resultMap </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="com.panda.beans.Emp"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="empAndDepResultMap"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 26</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> id：主键的特殊写法 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 27</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> result：非主键的通用写法 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 28</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> property：pojo对应成员变量名 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 29</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> column：数据库表对应字段名 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 30</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">id </span><span style="color: #ff0000;">property</span><span style="color: #0000ff;">="id"</span><span style="color: #ff0000;"> column</span><span style="color: #0000ff;">="eid"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;"> 31</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">result </span><span style="color: #ff0000;">property</span><span style="color: #0000ff;">="name"</span><span style="color: #ff0000;"> column</span><span style="color: #0000ff;">="name"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;"> 32</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">result </span><span style="color: #ff0000;">property</span><span style="color: #0000ff;">="email"</span><span style="color: #ff0000;"> column</span><span style="color: #0000ff;">="email"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;"> 33</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">result </span><span style="color: #ff0000;">property</span><span style="color: #0000ff;">="gender"</span><span style="color: #ff0000;"> column</span><span style="color: #0000ff;">="gender"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;"> 34</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 一般级联方式 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 35</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> &lt;result property="dep.id" column="did" /&gt; </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 36</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> &lt;result property="dep.dep_name" column="dep_name" /&gt; </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 37</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> association联合方式 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 38</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 结果为单条时使用association方式 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 39</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 子类型使用javaType </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 40</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> javaType为子查询对象 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 41</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">association </span><span style="color: #ff0000;">property</span><span style="color: #0000ff;">="dep"</span><span style="color: #ff0000;"> javaType</span><span style="color: #0000ff;">="com.panda.beans.Dep"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 42</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">id </span><span style="color: #ff0000;">property</span><span style="color: #0000ff;">="id"</span><span style="color: #ff0000;"> column</span><span style="color: #0000ff;">="did"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;"> 43</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">result </span><span style="color: #ff0000;">property</span><span style="color: #0000ff;">="dep_name"</span><span style="color: #ff0000;"> column</span><span style="color: #0000ff;">="dep_name"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;"> 44</span>         <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">association</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 45</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">resultMap</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 46</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 通过Id获取单个Emp对象级联dep对象使用resultMap </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 47</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> public Emp getEmpAndDepByIdUseResultMap(Integer id); </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 48</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">select </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="getEmpAndDepByIdUseResultMap"</span><span style="color: #ff0000;"> resultMap</span><span style="color: #0000ff;">="empAndDepResultMap"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 49</span> <span style="color: #000000;">        select e.id as eid,e.name,e.email,e.gender,d.id as did,d.dep_name from emp as e,dep as d where e.dep_id=d.id and e.id=#{id}
</span><span style="color: #008080;"> 50</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">select</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 51</span> 
<span style="color: #008080;"> 52</span> 
<span style="color: #008080;"> 53</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 通过Id获取单个Emp对象级联dep对象使用associate分步查询 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 54</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> public Dep getDepById(Integer id); </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 55</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">select </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="getDepById"</span><span style="color: #ff0000;"> resultType</span><span style="color: #0000ff;">="com.panda.beans.Dep"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 56</span> <span style="color: #000000;">        select * from dep where id=#{id}
</span><span style="color: #008080;"> 57</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 多参传入时 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 58</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> select * from dep where id=#{k1,k2} </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 59</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">select</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 60</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">resultMap </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="com.panda.beans.Emp"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="empAndDepStep"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 61</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">id </span><span style="color: #ff0000;">property</span><span style="color: #0000ff;">="id"</span><span style="color: #ff0000;"> column</span><span style="color: #0000ff;">="id"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;"> 62</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">result </span><span style="color: #ff0000;">property</span><span style="color: #0000ff;">="name"</span><span style="color: #ff0000;"> column</span><span style="color: #0000ff;">="name"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;"> 63</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">result </span><span style="color: #ff0000;">property</span><span style="color: #0000ff;">="email"</span><span style="color: #ff0000;"> column</span><span style="color: #0000ff;">="email"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;"> 64</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">result </span><span style="color: #ff0000;">property</span><span style="color: #0000ff;">="gender"</span><span style="color: #ff0000;"> column</span><span style="color: #0000ff;">="gender"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;"> 65</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 分步查询 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 66</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> fetchType="eager" 取消该查询的延迟加载 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 67</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">association </span><span style="color: #ff0000;">property</span><span style="color: #0000ff;">="dep"</span><span style="color: #ff0000;"> select</span><span style="color: #0000ff;">="com.panda.dao.EmpDao.getDepById"</span><span style="color: #ff0000;"> column</span><span style="color: #0000ff;">="dep_id"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 68</span>             <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 多参传入时 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 69</span>             <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> &lt;association property="dep" select="com.panda.dao.EmpDao.getDepById" column="{k1=dep_id,k2=?}"&gt; </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 70</span>             <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 无需查询语句自动调用com.panda.dao.EmpDao.getDepById </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 71</span>         <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">association</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 72</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">resultMap</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 73</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> public Emp getEmpAndDepByIdUseStep(); </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 74</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">select </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="getEmpAndDepByIdUseStep"</span><span style="color: #ff0000;"> resultMap</span><span style="color: #0000ff;">="empAndDepStep"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 75</span> <span style="color: #000000;">        select * from emp where id=#{id}
</span><span style="color: #008080;"> 76</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">select</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 77</span> 
<span style="color: #008080;"> 78</span> 
<span style="color: #008080;"> 79</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 通过Id获取Dep对象及其下属子集Emp </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 80</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> public Dep getDepAndEmpsByIdUseCollection(); </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 81</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> type为子查询对象 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 82</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">resultMap </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="com.panda.beans.Dep"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="depAndEmpsCollection"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 83</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">id </span><span style="color: #ff0000;">property</span><span style="color: #0000ff;">="id"</span><span style="color: #ff0000;"> column</span><span style="color: #0000ff;">="did"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;"> 84</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">result </span><span style="color: #ff0000;">property</span><span style="color: #0000ff;">="dep_name"</span><span style="color: #ff0000;"> column</span><span style="color: #0000ff;">="dep_name"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;"> 85</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 结果为多条时使用collection方式 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 86</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 集合类型使用ofType </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 87</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> ofType为子查询对象 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 88</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">collection </span><span style="color: #ff0000;">property</span><span style="color: #0000ff;">="emps"</span><span style="color: #ff0000;"> ofType</span><span style="color: #0000ff;">="com.panda.beans.Emp"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 89</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">id </span><span style="color: #ff0000;">property</span><span style="color: #0000ff;">="id"</span><span style="color: #ff0000;"> column</span><span style="color: #0000ff;">="eid"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;"> 90</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">result </span><span style="color: #ff0000;">property</span><span style="color: #0000ff;">="name"</span><span style="color: #ff0000;"> column</span><span style="color: #0000ff;">="name"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;"> 91</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">result </span><span style="color: #ff0000;">property</span><span style="color: #0000ff;">="mail"</span><span style="color: #ff0000;"> column</span><span style="color: #0000ff;">="mail"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;"> 92</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">result </span><span style="color: #ff0000;">property</span><span style="color: #0000ff;">="gender"</span><span style="color: #ff0000;"> column</span><span style="color: #0000ff;">="gender"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;"> 93</span>         <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">collection</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 94</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">resultMap</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 95</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">select </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="getDepAndEmpsByIdUseCollection"</span><span style="color: #ff0000;"> resultMap</span><span style="color: #0000ff;">="depAndEmpsCollection"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 96</span> <span style="color: #000000;">        select d.id as did,d.dep_name,e.id as eid,e.name,e.email,e.gender from dep as d left outer join emp as e on e.dep_id=d.id where d.id=#{id}
</span><span style="color: #008080;"> 97</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">select</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 98</span> 
<span style="color: #008080;"> 99</span> 
<span style="color: #008080;">100</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 通过did获取Emp对象集合 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">101</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> public List&lt;Emp&gt; getEmpsByDep_Id(Integer id); </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">102</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">select </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="getEmpsByDep_Id"</span><span style="color: #ff0000;"> resultType</span><span style="color: #0000ff;">="com.panda.beans.Emp"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">103</span> <span style="color: #000000;">        select * from emp where dep_id=#{did}
</span><span style="color: #008080;">104</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">select</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">105</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 通过Id获取单个Dep对象级联Emps对象集使用collection分步查询 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">106</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> public Dep getDepAndEmpsByIdUseStep(Integer id); </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">107</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">resultMap </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="com.panda.beans.Dep"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="depAndEmpsStep"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">108</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">id </span><span style="color: #ff0000;">property</span><span style="color: #0000ff;">="id"</span><span style="color: #ff0000;"> column</span><span style="color: #0000ff;">="id"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">109</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">result </span><span style="color: #ff0000;">property</span><span style="color: #0000ff;">="dep_name"</span><span style="color: #ff0000;"> column</span><span style="color: #0000ff;">="dep_name"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">110</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 分步查询 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">111</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">collection </span><span style="color: #ff0000;">property</span><span style="color: #0000ff;">="emps"</span><span style="color: #ff0000;"> select</span><span style="color: #0000ff;">="com.panda.dao.EmpDao.getEmpsByDep_Id"</span><span style="color: #ff0000;"> column</span><span style="color: #0000ff;">="id"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">112</span>             <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 无需查询语句自动调用com.panda.dao.EmpDao.getEmpsByDep_Id </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">113</span>         <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">collection</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">114</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">resultMap</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">115</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">select </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="getDepAndEmpsByIdUseStep"</span><span style="color: #ff0000;"> resultMap</span><span style="color: #0000ff;">="depAndEmpsStep"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">116</span> <span style="color: #000000;">        select * from dep where id=#{id}
</span><span style="color: #008080;">117</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">select</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">118</span> 
<span style="color: #008080;">119</span> 
<span style="color: #008080;">120</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> public List&lt;Emp&gt; getEmps(); </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">121</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">select </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="getEmps"</span><span style="color: #ff0000;"> resultType</span><span style="color: #0000ff;">="com.panda.beans.Emp"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">122</span> <span style="color: #000000;">        select * from emp
</span><span style="color: #008080;">123</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">select</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">124</span> 
<span style="color: #008080;">125</span> 
<span style="color: #008080;">126</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 赋值变量格式为 var=#{var} </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">127</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> public Emp getEmpById(Integer id); </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">128</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 1.普通单参传递#{名字任意} </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">129</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 当返回集合时，返回值类型为集合中的单个对象类型 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">130</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">select </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="getEmpById"</span><span style="color: #ff0000;"> resultType</span><span style="color: #0000ff;">="com.panda.beans.Emp"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">131</span> <span style="color: #000000;">        select * from emp where id=#{id}
</span><span style="color: #008080;">132</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">select</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">133</span> 
<span style="color: #008080;">134</span> 
<span style="color: #008080;">135</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> public void insertEmp(Emp emp); </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">136</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> useGeneratedKeys="true" 取出执行行的自增id号 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">137</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> keyProperty="id" 将取出的id号保存在参数列表中对象的id属性中 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">138</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">insert </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="insertEmp"</span><span style="color: #ff0000;"> parameterType</span><span style="color: #0000ff;">="com.panda.beans.Emp"</span><span style="color: #ff0000;"> useGeneratedKeys</span><span style="color: #0000ff;">="true"</span><span style="color: #ff0000;"> keyProperty</span><span style="color: #0000ff;">="id"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">139</span> <span style="color: #000000;">        insert into emp (name,email,gender) values(#{name},#{email},#{gender})
</span><span style="color: #008080;">140</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">insert</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">141</span> 
<span style="color: #008080;">142</span> 
<span style="color: #008080;">143</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> public void updateEmp(Emp emp); </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">144</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 3.通过传入POJO，单参时直接#{property1,...propertyn} </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">145</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">update </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="updateEmp"</span><span style="color: #ff0000;"> parameterType</span><span style="color: #0000ff;">="com.panda.beans.Emp"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">146</span> <span style="color: #000000;">        update emp set name=#{name} where id=#{id}
</span><span style="color: #008080;">147</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">update</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">148</span> 
<span style="color: #008080;">149</span> 
<span style="color: #008080;">150</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> public void deleteEmpById(Integer id); </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">151</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">delete </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="deleteEmpById"</span><span style="color: #ff0000;"> parameterType</span><span style="color: #0000ff;">="integer"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">152</span> <span style="color: #000000;">        delete from emp where id=#{id}
</span><span style="color: #008080;">153</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">delete</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">154</span> 
<span style="color: #008080;">155</span> 
<span style="color: #008080;">156</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> public Emp getEmpByIdAndName(Integer id,String name); </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">157</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 2.多个参数传递#{arg0/param0}...#{argn/paramn} </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">158</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">select </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="getEmpByIdAndName"</span><span style="color: #ff0000;"> resultType</span><span style="color: #0000ff;">="com.panda.beans.Emp"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">159</span> <span style="color: #000000;">        select * from emp where id=#{arg0} and name=#{arg1}
</span><span style="color: #008080;">160</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">select</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">161</span> 
<span style="color: #008080;">162</span> 
<span style="color: #008080;">163</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> getEmpByIdAndNameByAtParam(@Param("id") Integer id,..., @Param("name") String name); </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">164</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 5.通过使用命名参数，#{id,...name} </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">165</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">select </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="getEmpByIdAndNameByAtParam"</span><span style="color: #ff0000;"> resultType</span><span style="color: #0000ff;">="com.panda.beans.Emp"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">166</span> <span style="color: #000000;">        select * from emp where id=#{id} and name=#{name}
</span><span style="color: #008080;">167</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">select</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">168</span> 
<span style="color: #008080;">169</span> 
<span style="color: #008080;">170</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> public Emp getEmpByIdAndNameByMap(Map&lt;String, Object&gt; map); </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">171</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 4.通过传入Map时，直接使用map的K值类似于POJO#{k1,...kn} </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">172</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">select </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="getEmpByIdAndNameByMap"</span><span style="color: #ff0000;"> resultType</span><span style="color: #0000ff;">="com.panda.beans.Emp"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">173</span> <span style="color: #000000;">        select * from emp where id=#{id} and name=#{name}
</span><span style="color: #008080;">174</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">select</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">175</span> 
<span style="color: #008080;">176</span> 
<span style="color: #008080;">177</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 通过id查询一条结果并封装成Map </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">178</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> public Map&lt;String, Object&gt; getEmpByIdReturnMap(Integer id); </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">179</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 返回值类型直接写map，底层封装原理：K=数据库字段名，V=数据库的取值 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">180</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">select </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="getEmpByIdReturnMap"</span><span style="color: #ff0000;"> resultType</span><span style="color: #0000ff;">="map"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">181</span> <span style="color: #000000;">        select * from emp where id=#{id}
</span><span style="color: #008080;">182</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">select</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">183</span> 
<span style="color: #008080;">184</span> 
<span style="color: #008080;">185</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> @MapKey("id") </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">186</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> public Map&lt;String, Emp&gt; getEmpsByIdReturnMap(Integer id); </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">187</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">select </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="getEmpsByIdReturnMap"</span><span style="color: #ff0000;"> resultType</span><span style="color: #0000ff;">="com.panda.beans.Emp"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">188</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">include </span><span style="color: #ff0000;">refid</span><span style="color: #0000ff;">="sql_template1"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">include</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">189</span>         where id <span style="color: #ff0000;">&amp;lt;</span><span style="color: #000000;"> #{id}
</span><span style="color: #008080;">190</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">select</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">191</span> 
<span style="color: #008080;">192</span> 
<span style="color: #008080;">193</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 抽取sql语句片段通过&lt;include&gt;调用 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">194</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">sql </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="sql_template1"</span><span style="color: #0000ff;">&gt;</span>select * from emp<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">sql</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">195</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">mapper</span><span style="color: #0000ff;">&gt;</span></code></pre>

<pre><code><span style="font-size: 18px;">3.Sql配置文件EmpDynamicSqlDao.xml(动态sql)</span></code></pre>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;">  1</span> <span style="color: #0000ff;">&lt;?</span><span style="color: #ff00ff;">xml version="1.0" encoding="UTF-8" </span><span style="color: #0000ff;">?&gt;</span>
<span style="color: #008080;">  2</span> <span style="color: #0000ff;">&lt;!</span><span style="color: #ff00ff;">DOCTYPE mapper
</span><span style="color: #008080;">  3</span> <span style="color: #ff00ff;">PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
</span><span style="color: #008080;">  4</span> <span style="color: #ff00ff;">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">  5</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">mapper </span><span style="color: #ff0000;">namespace</span><span style="color: #0000ff;">="com.panda.dao.EmpDynamicSqlDao"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">  6</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> //ifwhere多条件动态sql查询Emps集 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">  7</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 解决第一个出现and/or的问题 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">  8</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> public List&lt;Emp&gt; getEmpsByConditionIfWhere(Emp condition); </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">  9</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">select </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="getEmpsByConditionIfWhere"</span><span style="color: #ff0000;"> resultType</span><span style="color: #0000ff;">="com.panda.beans.Emp"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 10</span> <span style="color: #000000;">        select id,name,email,gender from emp
</span><span style="color: #008080;"> 11</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">where</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 12</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">if </span><span style="color: #ff0000;">test</span><span style="color: #0000ff;">="id!=null"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 13</span> <span style="color: #000000;">                and id=#{id}
</span><span style="color: #008080;"> 14</span>             <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">if</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 15</span>             <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 使用OGNL表达式 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 16</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">if </span><span style="color: #ff0000;">test</span><span style="color: #0000ff;">="name!=null and name.trim()!=''"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 17</span> <span style="color: #000000;">                and name=#{name}
</span><span style="color: #008080;"> 18</span>             <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">if</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 19</span>             <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 使用转义字符 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 20</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">if </span><span style="color: #ff0000;">test</span><span style="color: #0000ff;">="email!=null&amp;amp;&amp;amp;email.trim()!=&amp;quot;&amp;quot;"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 21</span> <span style="color: #000000;">                and email=#{email}
</span><span style="color: #008080;"> 22</span>             <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">if</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 23</span>             <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 使用外层单引号，内层双引号可以避免'男'被识别为char类型的 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 24</span>             <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 使用转义符，较麻烦 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 25</span>             <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 使用'男'.toString() </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 26</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">if </span><span style="color: #ff0000;">test</span><span style="color: #0000ff;">='gender=="男" or gender=="女"  '</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 27</span> <span style="color: #000000;">                and gender=#{gender}
</span><span style="color: #008080;"> 28</span>             <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">if</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 29</span>         <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">where</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 30</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">select</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 31</span> 
<span style="color: #008080;"> 32</span> 
<span style="color: #008080;"> 33</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> //iftrim多条件动态sql查询Emps集 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 34</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> public List&lt;Emp&gt; getEmpsByConditionIfTrim(Emp condition); </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 35</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">select </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="getEmpsByConditionIfTrim"</span><span style="color: #ff0000;"> resultType</span><span style="color: #0000ff;">="com.panda.beans.Emp"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 36</span> <span style="color: #000000;">        select id,name,email,gender from emp
</span><span style="color: #008080;"> 37</span>         <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 加前缀where，覆盖或者删除后缀and|or </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 38</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">trim </span><span style="color: #ff0000;">prefix</span><span style="color: #0000ff;">="where"</span><span style="color: #ff0000;"> suffixOverrides</span><span style="color: #0000ff;">="and|or"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 39</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">if </span><span style="color: #ff0000;">test</span><span style="color: #0000ff;">="id!=null"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 40</span> <span style="color: #000000;">                id=#{id} and
</span><span style="color: #008080;"> 41</span>             <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">if</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 42</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">if </span><span style="color: #ff0000;">test</span><span style="color: #0000ff;">="name!=null and name.trim()!=''"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 43</span> <span style="color: #000000;">                name=#{name} and
</span><span style="color: #008080;"> 44</span>             <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">if</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 45</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">if </span><span style="color: #ff0000;">test</span><span style="color: #0000ff;">="email!=null&amp;amp;&amp;amp;email.trim()!=&amp;quot;&amp;quot;"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 46</span> <span style="color: #000000;">                email=#{email} and
</span><span style="color: #008080;"> 47</span>             <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">if</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 48</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">if </span><span style="color: #ff0000;">test</span><span style="color: #0000ff;">='gender=="男" or gender=="女"  '</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 49</span> <span style="color: #000000;">                gender=#{gender}
</span><span style="color: #008080;"> 50</span>             <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">if</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 51</span>         <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">trim</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 52</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">select</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 53</span> 
<span style="color: #008080;"> 54</span> 
<span style="color: #008080;"> 55</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> //choose多条件逐一判断动态sql查询Emps值 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 56</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> public List&lt;Emp&gt; getEmpsByConditionChoose(Emp condition); </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 57</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">select </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="getEmpsByConditionChoose"</span><span style="color: #ff0000;"> resultType</span><span style="color: #0000ff;">="com.panda.beans.Emp"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 58</span> <span style="color: #000000;">        select id,name,email,gender from emp
</span><span style="color: #008080;"> 59</span> <span style="color: #000000;">        where
</span><span style="color: #008080;"> 60</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">choose</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 61</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">when </span><span style="color: #ff0000;">test</span><span style="color: #0000ff;">="id!=null"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 62</span> <span style="color: #000000;">                id=#{id}
</span><span style="color: #008080;"> 63</span>             <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">when</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 64</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">when </span><span style="color: #ff0000;">test</span><span style="color: #0000ff;">="name!=null"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 65</span> <span style="color: #000000;">                name=#{name}
</span><span style="color: #008080;"> 66</span>             <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">when</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 67</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">when </span><span style="color: #ff0000;">test</span><span style="color: #0000ff;">="email!=null"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 68</span> <span style="color: #000000;">                email=#{email}
</span><span style="color: #008080;"> 69</span>             <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">when</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 70</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">otherwise</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 71</span> <span style="color: #000000;">                gender="男"
</span><span style="color: #008080;"> 72</span>             <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">otherwise</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 73</span>         <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">choose</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 74</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">select</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 75</span> 
<span style="color: #008080;"> 76</span> 
<span style="color: #008080;"> 77</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> //foreach查询几个Emps集 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 78</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> public List&lt;Emp&gt; getEmpsByIdsForeach(@Param("ids")List&lt;Integer&gt; ids); </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 79</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">select </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="getEmpsByIdsForeach"</span><span style="color: #ff0000;"> resultType</span><span style="color: #0000ff;">="com.panda.beans.Emp"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 80</span> <span style="color: #000000;">        select * from emp where id in
</span><span style="color: #008080;"> 81</span> <span style="color: #000000;">        (
</span><span style="color: #008080;"> 82</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">foreach </span><span style="color: #ff0000;">collection</span><span style="color: #0000ff;">="ids"</span><span style="color: #ff0000;"> item</span><span style="color: #0000ff;">="id"</span><span style="color: #ff0000;"> open</span><span style="color: #0000ff;">=""</span><span style="color: #ff0000;"> close</span><span style="color: #0000ff;">=""</span><span style="color: #ff0000;"> separator</span><span style="color: #0000ff;">=","</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 83</span> <span style="color: #000000;">            #{id}
</span><span style="color: #008080;"> 84</span>         <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">foreach</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 85</span> <span style="color: #000000;">        )
</span><span style="color: #008080;"> 86</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">select</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 87</span> 
<span style="color: #008080;"> 88</span> 
<span style="color: #008080;"> 89</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> //set多条件动态sql设置Emp值 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 90</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> public void updateEmpByConditionIfSet(Emp condition); </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 91</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 解决set后的多余，问题 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 92</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">update </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="updateEmpByConditionIfSet"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 93</span> <span style="color: #000000;">        update emp
</span><span style="color: #008080;"> 94</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">set</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 95</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">if </span><span style="color: #ff0000;">test</span><span style="color: #0000ff;">="name!=null and name.trim()!=''"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 96</span> <span style="color: #000000;">                name=#{name},
</span><span style="color: #008080;"> 97</span>             <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">if</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 98</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">if </span><span style="color: #ff0000;">test</span><span style="color: #0000ff;">="email!=null&amp;amp;&amp;amp;email.trim()!=&amp;quot;&amp;quot;"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 99</span> <span style="color: #000000;">                email=#{email},
</span><span style="color: #008080;">100</span>             <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">if</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">101</span>             <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">if </span><span style="color: #ff0000;">test</span><span style="color: #0000ff;">='gender=="男" or gender=="女"  '</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">102</span> <span style="color: #000000;">                gender=#{gender}
</span><span style="color: #008080;">103</span>             <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">if</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">104</span>         <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">set</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">105</span> <span style="color: #000000;">        where id=#{id}
</span><span style="color: #008080;">106</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">update</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">107</span> 
<span style="color: #008080;">108</span> 
<span style="color: #008080;">109</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> //foreach批量添加Emps </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">110</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> public void insertLotEmps(@Param("emps") List&lt;Emp&gt; emps); </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">111</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">insert </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="insertLotEmps"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">112</span> <span style="color: #000000;">        insert into emp(name,email,gender) values
</span><span style="color: #008080;">113</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">foreach </span><span style="color: #ff0000;">collection</span><span style="color: #0000ff;">="emps"</span><span style="color: #ff0000;"> item</span><span style="color: #0000ff;">="emp"</span><span style="color: #ff0000;"> open</span><span style="color: #0000ff;">=""</span><span style="color: #ff0000;"> close</span><span style="color: #0000ff;">=""</span><span style="color: #ff0000;"> separator</span><span style="color: #0000ff;">=","</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">114</span> <span style="color: #000000;">            (#{emp.name},#{emp.email},#{emp.gender})
</span><span style="color: #008080;">115</span>         <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">foreach</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">116</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">insert</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">117</span> 
<span style="color: #008080;">118</span> 
<span style="color: #008080;">119</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 批量删除思路：delete from emp where id in() </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">120</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 批量修改思路：update emp set name=#{name}...where id=#{id}(数据库连接url后面连接？allowMutilQueries=true) </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;">121</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">mapper</span><span style="color: #0000ff;">&gt;</span></code></pre>

<p><span style="font-size: 14pt;">三、创建dao和beans</span></p>
<pre><code><span style="font-size: 18px;">1.EmpDao.java</span></code></pre>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #000000;">package com.panda.dao;
</span><span style="color: #008080;"> 2</span> <span style="color: #000000;">/**
</span><span style="color: #008080;"> 3</span> <span style="color: #000000;">@author Jpanda
</span><span style="color: #008080;"> 4</span> <span style="color: #000000;">*/
</span><span style="color: #008080;"> 5</span> 
<span style="color: #008080;"> 6</span> <span style="color: #000000;">import java.util.List;
</span><span style="color: #008080;"> 7</span> <span style="color: #000000;">import java.util.Map;
</span><span style="color: #008080;"> 8</span> 
<span style="color: #008080;"> 9</span> <span style="color: #000000;">import org.apache.ibatis.annotations.MapKey;
</span><span style="color: #008080;">10</span> <span style="color: #000000;">import org.apache.ibatis.annotations.Param;
</span><span style="color: #008080;">11</span> 
<span style="color: #008080;">12</span> <span style="color: #000000;">import com.panda.beans.Dep;
</span><span style="color: #008080;">13</span> <span style="color: #000000;">import com.panda.beans.Emp;
</span><span style="color: #008080;">14</span> 
<span style="color: #008080;">15</span> <span style="color: #000000;">public interface EmpDao {
</span><span style="color: #008080;">16</span> <span style="color: #000000;">    // 获取全体Emp对象
</span><span style="color: #008080;">17</span>     public List<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Emp</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"> getEmps();
</span><span style="color: #008080;">18</span> 
<span style="color: #008080;">19</span> <span style="color: #000000;">    // 通过Id获取单个Emp对象
</span><span style="color: #008080;">20</span> <span style="color: #000000;">    public Emp getEmpById(Integer id);
</span><span style="color: #008080;">21</span> 
<span style="color: #008080;">22</span> <span style="color: #000000;">    // 增加新员工
</span><span style="color: #008080;">23</span> <span style="color: #000000;">    public void insertEmp(Emp emp);
</span><span style="color: #008080;">24</span> 
<span style="color: #008080;">25</span> <span style="color: #000000;">    // 修改员工信息
</span><span style="color: #008080;">26</span> <span style="color: #000000;">    public void updateEmp(Emp emp);
</span><span style="color: #008080;">27</span> 
<span style="color: #008080;">28</span> <span style="color: #000000;">    // 删除员工
</span><span style="color: #008080;">29</span> <span style="color: #000000;">    public void deleteEmpById(Integer id);
</span><span style="color: #008080;">30</span> 
<span style="color: #008080;">31</span> <span style="color: #000000;">    // 通过id和name获取单个Emp对象
</span><span style="color: #008080;">32</span> <span style="color: #000000;">    public Emp getEmpByIdAndName(Integer id, String name);
</span><span style="color: #008080;">33</span> 
<span style="color: #008080;">34</span> <span style="color: #000000;">    // 通过id和name获取单个Emp对象使用命名参数
</span><span style="color: #008080;">35</span> <span style="color: #000000;">    public Emp getEmpByIdAndNameByAtParam(@Param("id") Integer id, @Param("name") String name);
</span><span style="color: #008080;">36</span> 
<span style="color: #008080;">37</span> <span style="color: #000000;">    // 通过id和name获取单个Emp对象使用Map
</span><span style="color: #008080;">38</span>     public Emp getEmpByIdAndNameByMap(Map<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">String</span><span style="color: #ff0000;">, Object</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"> map);
</span><span style="color: #008080;">39</span> 
<span style="color: #008080;">40</span> <span style="color: #000000;">    // 通过id查询一条结果并封装成Map
</span><span style="color: #008080;">41</span>     public Map<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">String</span><span style="color: #ff0000;">, Object</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"> getEmpByIdReturnMap(Integer id);
</span><span style="color: #008080;">42</span> 
<span style="color: #008080;">43</span> <span style="color: #000000;">    // 通过id条件查询多条结果并封装成Map
</span><span style="color: #008080;">44</span> <span style="color: #000000;">    @MapKey("id")
</span><span style="color: #008080;">45</span>     public Map<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Integer</span><span style="color: #ff0000;">, Emp</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"> getEmpsByIdReturnMap(Integer id);
</span><span style="color: #008080;">46</span> 
<span style="color: #008080;">47</span> <span style="color: #000000;">    // 通过Id获取单个Emp对象级联dep对象使用resultMap
</span><span style="color: #008080;">48</span> <span style="color: #000000;">    public Emp getEmpAndDepByIdUseResultMap(Integer id);
</span><span style="color: #008080;">49</span> 
<span style="color: #008080;">50</span> <span style="color: #000000;">    // 通过id查询获取单个Dep对象
</span><span style="color: #008080;">51</span> <span style="color: #000000;">    public Dep getDepById(Integer id);
</span><span style="color: #008080;">52</span> 
<span style="color: #008080;">53</span> <span style="color: #000000;">    // 通过Id获取单个Emp对象级联dep对象使用associate分步查询
</span><span style="color: #008080;">54</span> <span style="color: #000000;">    public Emp getEmpAndDepByIdUseStep(Integer id);
</span><span style="color: #008080;">55</span> 
<span style="color: #008080;">56</span> <span style="color: #000000;">    // 通过Id获取Dep对象及其下属子集Emp
</span><span style="color: #008080;">57</span> <span style="color: #000000;">    public Dep getDepAndEmpsByIdUseCollection(Integer id);
</span><span style="color: #008080;">58</span> 
<span style="color: #008080;">59</span> <span style="color: #000000;">    // 通过did获取Emp对象集合
</span><span style="color: #008080;">60</span>     public List<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Emp</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"> getEmpsByDep_Id(Integer did);
</span><span style="color: #008080;">61</span> 
<span style="color: #008080;">62</span> <span style="color: #000000;">    // 通过Id获取单个Dep对象级联Emps对象集使用collection分步查询
</span><span style="color: #008080;">63</span> <span style="color: #000000;">    public Dep getDepAndEmpsByIdUseStep(Integer id);
</span><span style="color: #008080;">64</span> 
<span style="color: #008080;">65</span> }</code></pre>

<pre><code><span style="font-size: 18px;">2.EmpDynamicSqlDao.java</span></code></pre>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #000000;">package com.panda.dao;
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #000000;">import java.util.List;
</span><span style="color: #008080;"> 4</span> 
<span style="color: #008080;"> 5</span> <span style="color: #000000;">import org.apache.ibatis.annotations.Param;
</span><span style="color: #008080;"> 6</span> 
<span style="color: #008080;"> 7</span> <span style="color: #000000;">import com.panda.beans.Emp;
</span><span style="color: #008080;"> 8</span> 
<span style="color: #008080;"> 9</span> <span style="color: #000000;">/**
</span><span style="color: #008080;">10</span> <span style="color: #000000;"> * @author Jpanda
</span><span style="color: #008080;">11</span> <span style="color: #000000;"> */
</span><span style="color: #008080;">12</span> <span style="color: #000000;">public interface EmpDynamicSqlDao {
</span><span style="color: #008080;">13</span> <span style="color: #000000;">    // ifwhere多条件动态sql查询Emps集
</span><span style="color: #008080;">14</span>     public List<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Emp</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"> getEmpsByConditionIfWhere(Emp condition);
</span><span style="color: #008080;">15</span> 
<span style="color: #008080;">16</span> <span style="color: #000000;">    // iftrim多条件动态sql查询Emps集
</span><span style="color: #008080;">17</span>     public List<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Emp</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"> getEmpsByConditionIfTrim(Emp condition);
</span><span style="color: #008080;">18</span> 
<span style="color: #008080;">19</span> <span style="color: #000000;">    // choose多条件逐一判断动态sql查询Emps值
</span><span style="color: #008080;">20</span>     public List<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Emp</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"> getEmpsByConditionChoose(Emp condition);
</span><span style="color: #008080;">21</span> 
<span style="color: #008080;">22</span> <span style="color: #000000;">    // foreach查询几个Emps集
</span><span style="color: #008080;">23</span>     public List<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Emp</span><span style="color: #0000ff;">&gt;</span> getEmpsByIdsForeach(@Param("ids") List<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Integer</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"> ids);
</span><span style="color: #008080;">24</span> 
<span style="color: #008080;">25</span> <span style="color: #000000;">    // set多条件动态sql设置Emp值
</span><span style="color: #008080;">26</span> <span style="color: #000000;">    public void updateEmpByConditionIfSet(Emp condition);
</span><span style="color: #008080;">27</span> 
<span style="color: #008080;">28</span> <span style="color: #000000;">    // foreach批量添加Emps
</span><span style="color: #008080;">29</span>     public void insertLotEmps(@Param("emps") List<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Emp</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"> emps);
</span><span style="color: #008080;">30</span> 
<span style="color: #008080;">31</span> }</code></pre>

<pre><code><span style="font-size: 18px;">3.Emp.java</span></code></pre>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #000000;">package com.panda.beans;
</span><span style="color: #008080;"> 2</span> <span style="color: #000000;">/**
</span><span style="color: #008080;"> 3</span> <span style="color: #000000;">@author Jpanda
</span><span style="color: #008080;"> 4</span> <span style="color: #000000;">*/
</span><span style="color: #008080;"> 5</span> <span style="color: #000000;">public class Emp {
</span><span style="color: #008080;"> 6</span> <span style="color: #000000;">    private Integer id;
</span><span style="color: #008080;"> 7</span> <span style="color: #000000;">    private String name;
</span><span style="color: #008080;"> 8</span> <span style="color: #000000;">    private String email;
</span><span style="color: #008080;"> 9</span> <span style="color: #000000;">    private String gender;
</span><span style="color: #008080;">10</span> <span style="color: #000000;">    private Dep dep;
</span><span style="color: #008080;">11</span> <span style="color: #000000;">    public Integer getId() {
</span><span style="color: #008080;">12</span> <span style="color: #000000;">        return id;
</span><span style="color: #008080;">13</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">14</span> <span style="color: #000000;">    public void setId(Integer id) {
</span><span style="color: #008080;">15</span> <span style="color: #000000;">        this.id = id;
</span><span style="color: #008080;">16</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">17</span> <span style="color: #000000;">    public String getName() {
</span><span style="color: #008080;">18</span> <span style="color: #000000;">        return name;
</span><span style="color: #008080;">19</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">20</span> <span style="color: #000000;">    public void setName(String name) {
</span><span style="color: #008080;">21</span> <span style="color: #000000;">        this.name = name;
</span><span style="color: #008080;">22</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">23</span> <span style="color: #000000;">    public String getEmail() {
</span><span style="color: #008080;">24</span> <span style="color: #000000;">        return email;
</span><span style="color: #008080;">25</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">26</span> <span style="color: #000000;">    public void setEmail(String email) {
</span><span style="color: #008080;">27</span> <span style="color: #000000;">        this.email = email;
</span><span style="color: #008080;">28</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">29</span> <span style="color: #000000;">    public String getGender() {
</span><span style="color: #008080;">30</span> <span style="color: #000000;">        return gender;
</span><span style="color: #008080;">31</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">32</span> <span style="color: #000000;">    public void setGender(String gender) {
</span><span style="color: #008080;">33</span> <span style="color: #000000;">        this.gender = gender;
</span><span style="color: #008080;">34</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">35</span> <span style="color: #000000;">    public Dep getDep() {
</span><span style="color: #008080;">36</span> <span style="color: #000000;">        return dep;
</span><span style="color: #008080;">37</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">38</span> <span style="color: #000000;">    public void setDep(Dep dep) {
</span><span style="color: #008080;">39</span> <span style="color: #000000;">        this.dep = dep;
</span><span style="color: #008080;">40</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">41</span> <span style="color: #000000;">    @Override
</span><span style="color: #008080;">42</span> <span style="color: #000000;">    public String toString() {
</span><span style="color: #008080;">43</span> <span style="color: #000000;">        return "Emp [id=" + id + ", name=" + name + ", email=" + email + ", gender=" + gender + ", dep=" + dep + "]";
</span><span style="color: #008080;">44</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">45</span> <span style="color: #000000;">    public Emp(Integer id, String name, String email, String gender, Dep dep) {
</span><span style="color: #008080;">46</span> <span style="color: #000000;">        super();
</span><span style="color: #008080;">47</span> <span style="color: #000000;">        this.id = id;
</span><span style="color: #008080;">48</span> <span style="color: #000000;">        this.name = name;
</span><span style="color: #008080;">49</span> <span style="color: #000000;">        this.email = email;
</span><span style="color: #008080;">50</span> <span style="color: #000000;">        this.gender = gender;
</span><span style="color: #008080;">51</span> <span style="color: #000000;">        this.dep = dep;
</span><span style="color: #008080;">52</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">53</span> <span style="color: #000000;">    public Emp() {
</span><span style="color: #008080;">54</span> <span style="color: #000000;">        super();
</span><span style="color: #008080;">55</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">56</span> 
<span style="color: #008080;">57</span>     
<span style="color: #008080;">58</span> }</code></pre>

<pre><code><span style="font-size: 18px;">4.Dep.java</span></code></pre>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #000000;">package com.panda.beans;
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #000000;">import java.util.List;
</span><span style="color: #008080;"> 4</span> 
<span style="color: #008080;"> 5</span> <span style="color: #000000;">/**
</span><span style="color: #008080;"> 6</span> <span style="color: #000000;">@author Jpanda
</span><span style="color: #008080;"> 7</span> <span style="color: #000000;">*/
</span><span style="color: #008080;"> 8</span> <span style="color: #000000;">public class Dep {
</span><span style="color: #008080;"> 9</span> <span style="color: #000000;">    private int id;
</span><span style="color: #008080;">10</span> <span style="color: #000000;">    private String dep_name;
</span><span style="color: #008080;">11</span>     private List<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Emp</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"> emps;
</span><span style="color: #008080;">12</span> <span style="color: #000000;">    public int getId() {
</span><span style="color: #008080;">13</span> <span style="color: #000000;">        return id;
</span><span style="color: #008080;">14</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">15</span> <span style="color: #000000;">    public void setId(int id) {
</span><span style="color: #008080;">16</span> <span style="color: #000000;">        this.id = id;
</span><span style="color: #008080;">17</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">18</span> <span style="color: #000000;">    public String getDep_name() {
</span><span style="color: #008080;">19</span> <span style="color: #000000;">        return dep_name;
</span><span style="color: #008080;">20</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">21</span> <span style="color: #000000;">    public void setDep_name(String dep_name) {
</span><span style="color: #008080;">22</span> <span style="color: #000000;">        this.dep_name = dep_name;
</span><span style="color: #008080;">23</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">24</span>     public List<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Emp</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"> getEmps() {
</span><span style="color: #008080;">25</span> <span style="color: #000000;">        return emps;
</span><span style="color: #008080;">26</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">27</span>     public void setEmps(List<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Emp</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"> emps) {
</span><span style="color: #008080;">28</span> <span style="color: #000000;">        this.emps = emps;
</span><span style="color: #008080;">29</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">30</span> <span style="color: #000000;">    @Override
</span><span style="color: #008080;">31</span> <span style="color: #000000;">    public String toString() {
</span><span style="color: #008080;">32</span> <span style="color: #000000;">        return "Dep [id=" + id + ", dep_name=" + dep_name + ", emps=" + emps + "]";
</span><span style="color: #008080;">33</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">34</span> 
<span style="color: #008080;">35</span> 
<span style="color: #008080;">36</span> }</code></pre>

<p><span style="font-size: 14pt;">四、执行测试类(学习的时候都复制第一个测试方法所以没有封装重复部分，能够理解就好，测试顺序也没有做到和sql配置文件顺序完全对应，懒得改了。。。。)</span></p>
<pre><code><span style="font-size: 18px;">1.MybatisTest.java(非动态部分)</span></code></pre>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;">  1</span> <span style="color: #000000;">package com.panda.test;
</span><span style="color: #008080;">  2</span> 
<span style="color: #008080;">  3</span> <span style="color: #000000;">import java.io.InputStream;
</span><span style="color: #008080;">  4</span> <span style="color: #000000;">import java.util.HashMap;
</span><span style="color: #008080;">  5</span> <span style="color: #000000;">import java.util.List;
</span><span style="color: #008080;">  6</span> <span style="color: #000000;">import java.util.Map;
</span><span style="color: #008080;">  7</span> 
<span style="color: #008080;">  8</span> <span style="color: #000000;">import org.apache.ibatis.io.Resources;
</span><span style="color: #008080;">  9</span> <span style="color: #000000;">import org.apache.ibatis.session.SqlSession;
</span><span style="color: #008080;"> 10</span> <span style="color: #000000;">import org.apache.ibatis.session.SqlSessionFactory;
</span><span style="color: #008080;"> 11</span> <span style="color: #000000;">import org.apache.ibatis.session.SqlSessionFactoryBuilder;
</span><span style="color: #008080;"> 12</span> <span style="color: #000000;">import org.junit.BeforeClass;
</span><span style="color: #008080;"> 13</span> <span style="color: #000000;">import org.junit.Test;
</span><span style="color: #008080;"> 14</span> 
<span style="color: #008080;"> 15</span> <span style="color: #000000;">import com.panda.beans.Dep;
</span><span style="color: #008080;"> 16</span> <span style="color: #000000;">import com.panda.beans.Emp;
</span><span style="color: #008080;"> 17</span> <span style="color: #000000;">import com.panda.dao.EmpDao;
</span><span style="color: #008080;"> 18</span> 
<span style="color: #008080;"> 19</span> <span style="color: #000000;">/**
</span><span style="color: #008080;"> 20</span> <span style="color: #000000;"> * @author Jpanda
</span><span style="color: #008080;"> 21</span> <span style="color: #000000;"> */
</span><span style="color: #008080;"> 22</span> <span style="color: #000000;">public class MybatisTest {
</span><span style="color: #008080;"> 23</span> 
<span style="color: #008080;"> 24</span> <span style="color: #000000;">    @BeforeClass
</span><span style="color: #008080;"> 25</span> <span style="color: #000000;">    public static void setUpBeforeClass() throws Exception {
</span><span style="color: #008080;"> 26</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 27</span> 
<span style="color: #008080;"> 28</span> <span style="color: #000000;">    // 原始方法实现Mybatis
</span><span style="color: #008080;"> 29</span> <span style="color: #000000;">    @Test
</span><span style="color: #008080;"> 30</span> <span style="color: #000000;">    public void testHelloWorld() throws Exception {
</span><span style="color: #008080;"> 31</span> <span style="color: #000000;">        // 通过流获取主配置文件
</span><span style="color: #008080;"> 32</span> <span style="color: #000000;">        InputStream is = Resources.getResourceAsStream("mybatis-config.xml");
</span><span style="color: #008080;"> 33</span> <span style="color: #000000;">        // 获取SqlSession工厂对象
</span><span style="color: #008080;"> 34</span> <span style="color: #000000;">        SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(is);
</span><span style="color: #008080;"> 35</span> <span style="color: #000000;">        // 获取sqlSession代理对象
</span><span style="color: #008080;"> 36</span> <span style="color: #000000;">        SqlSession sqlSession = factory.openSession();
</span><span style="color: #008080;"> 37</span> <span style="color: #000000;">        // 通过代理对象调用接口中相应的方法
</span><span style="color: #008080;"> 38</span>         List<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Emp</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"> emps = sqlSession.selectList("com.panda.dao.EmpDao.getEmps");
</span><span style="color: #008080;"> 39</span> <span style="color: #000000;">        System.out.println(emps);
</span><span style="color: #008080;"> 40</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 41</span> 
<span style="color: #008080;"> 42</span> <span style="color: #000000;">    // 获取全体Emp对象
</span><span style="color: #008080;"> 43</span> <span style="color: #000000;">    @Test
</span><span style="color: #008080;"> 44</span> <span style="color: #000000;">    public void testGetEmps() throws Exception {
</span><span style="color: #008080;"> 45</span> <span style="color: #000000;">        // 通过流获取主配置文件
</span><span style="color: #008080;"> 46</span> <span style="color: #000000;">        InputStream is = Resources.getResourceAsStream("mybatis-config.xml");
</span><span style="color: #008080;"> 47</span> <span style="color: #000000;">        // 获取SqlSession工厂对象
</span><span style="color: #008080;"> 48</span> <span style="color: #000000;">        SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(is);
</span><span style="color: #008080;"> 49</span> <span style="color: #000000;">        // 获取sqlSession对象
</span><span style="color: #008080;"> 50</span> <span style="color: #000000;">        SqlSession sqlSession = factory.openSession();
</span><span style="color: #008080;"> 51</span> <span style="color: #000000;">        // 通过sqlSession对象获取代理对象
</span><span style="color: #008080;"> 52</span> <span style="color: #000000;">        EmpDao mapper = sqlSession.getMapper(EmpDao.class);
</span><span style="color: #008080;"> 53</span> <span style="color: #000000;">        // 通过代理对象调用相应接口方法
</span><span style="color: #008080;"> 54</span> <span style="color: #000000;">        try {
</span><span style="color: #008080;"> 55</span>             List<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Emp</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"> emps = mapper.getEmps();
</span><span style="color: #008080;"> 56</span> <span style="color: #000000;">            System.out.println(emps);
</span><span style="color: #008080;"> 57</span> <span style="color: #000000;">        } catch (Exception e) {
</span><span style="color: #008080;"> 58</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;"> 59</span> <span style="color: #000000;">        } finally {
</span><span style="color: #008080;"> 60</span> <span style="color: #000000;">            sqlSession.close();
</span><span style="color: #008080;"> 61</span> <span style="color: #000000;">            is.close();
</span><span style="color: #008080;"> 62</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 63</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 64</span> 
<span style="color: #008080;"> 65</span> <span style="color: #000000;">    // 通过Id获取单个Emp对象
</span><span style="color: #008080;"> 66</span> <span style="color: #000000;">    @Test
</span><span style="color: #008080;"> 67</span> <span style="color: #000000;">    public void testGetEmpById() throws Exception {
</span><span style="color: #008080;"> 68</span> <span style="color: #000000;">        // 通过流获取主配置文件
</span><span style="color: #008080;"> 69</span> <span style="color: #000000;">        InputStream is = Resources.getResourceAsStream("mybatis-config.xml");
</span><span style="color: #008080;"> 70</span> <span style="color: #000000;">        // 获取SqlSession工厂对象
</span><span style="color: #008080;"> 71</span> <span style="color: #000000;">        SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(is);
</span><span style="color: #008080;"> 72</span> <span style="color: #000000;">        // 获取sqlSession对象
</span><span style="color: #008080;"> 73</span> <span style="color: #000000;">        SqlSession sqlSession = factory.openSession();
</span><span style="color: #008080;"> 74</span> <span style="color: #000000;">        // 通过sqlSession对象获取代理对象
</span><span style="color: #008080;"> 75</span> <span style="color: #000000;">        EmpDao mapper = sqlSession.getMapper(EmpDao.class);
</span><span style="color: #008080;"> 76</span> <span style="color: #000000;">        // 通过代理对象调用相应接口方法
</span><span style="color: #008080;"> 77</span> <span style="color: #000000;">        try {
</span><span style="color: #008080;"> 78</span> <span style="color: #000000;">            Emp empById = mapper.getEmpById(1);
</span><span style="color: #008080;"> 79</span> <span style="color: #000000;">            System.out.println(empById);
</span><span style="color: #008080;"> 80</span> <span style="color: #000000;">        } catch (Exception e) {
</span><span style="color: #008080;"> 81</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;"> 82</span> <span style="color: #000000;">        } finally {
</span><span style="color: #008080;"> 83</span> <span style="color: #000000;">            sqlSession.close();
</span><span style="color: #008080;"> 84</span> <span style="color: #000000;">            is.close();
</span><span style="color: #008080;"> 85</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 86</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 87</span> 
<span style="color: #008080;"> 88</span> <span style="color: #000000;">    // 增加新员工
</span><span style="color: #008080;"> 89</span> <span style="color: #000000;">    @Test
</span><span style="color: #008080;"> 90</span> <span style="color: #000000;">    public void testInsertEmp() throws Exception {
</span><span style="color: #008080;"> 91</span> <span style="color: #000000;">        // 通过流获取主配置文件
</span><span style="color: #008080;"> 92</span> <span style="color: #000000;">        InputStream is = Resources.getResourceAsStream("mybatis-config.xml");
</span><span style="color: #008080;"> 93</span> <span style="color: #000000;">        // 获取SqlSession工厂对象
</span><span style="color: #008080;"> 94</span> <span style="color: #000000;">        SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(is);
</span><span style="color: #008080;"> 95</span> <span style="color: #000000;">        // 获取sqlSession对象
</span><span style="color: #008080;"> 96</span> <span style="color: #000000;">        SqlSession sqlSession = factory.openSession();
</span><span style="color: #008080;"> 97</span> <span style="color: #000000;">        // 通过sqlSession对象获取代理对象
</span><span style="color: #008080;"> 98</span> <span style="color: #000000;">        EmpDao mapper = sqlSession.getMapper(EmpDao.class);
</span><span style="color: #008080;"> 99</span> <span style="color: #000000;">        // 创建emp对象
</span><span style="color: #008080;">100</span> <span style="color: #000000;">        Emp emp = new Emp();
</span><span style="color: #008080;">101</span> <span style="color: #000000;">        emp.setName("test");
</span><span style="color: #008080;">102</span> <span style="color: #000000;">        emp.setGender("男");
</span><span style="color: #008080;">103</span> <span style="color: #000000;">        emp.setEmail("770233258@qq.com");
</span><span style="color: #008080;">104</span> <span style="color: #000000;">        // 通过代理对象调用相应接口方法
</span><span style="color: #008080;">105</span> <span style="color: #000000;">        try {
</span><span style="color: #008080;">106</span> <span style="color: #000000;">            mapper.insertEmp(emp);
</span><span style="color: #008080;">107</span> <span style="color: #000000;">            sqlSession.commit();
</span><span style="color: #008080;">108</span> <span style="color: #000000;">        } catch (Exception e) {
</span><span style="color: #008080;">109</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;">110</span> <span style="color: #000000;">        } finally {
</span><span style="color: #008080;">111</span> <span style="color: #000000;">            sqlSession.close();
</span><span style="color: #008080;">112</span> <span style="color: #000000;">            is.close();
</span><span style="color: #008080;">113</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">114</span> <span style="color: #000000;">        // 返回插入行的id
</span><span style="color: #008080;">115</span> <span style="color: #000000;">        System.out.println(emp.getId());
</span><span style="color: #008080;">116</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">117</span> 
<span style="color: #008080;">118</span> <span style="color: #000000;">    // 修改员工信息
</span><span style="color: #008080;">119</span> <span style="color: #000000;">    @Test
</span><span style="color: #008080;">120</span> <span style="color: #000000;">    public void testUpdateEmp() throws Exception {
</span><span style="color: #008080;">121</span> <span style="color: #000000;">        // 通过流获取主配置文件
</span><span style="color: #008080;">122</span> <span style="color: #000000;">        InputStream is = Resources.getResourceAsStream("mybatis-config.xml");
</span><span style="color: #008080;">123</span> <span style="color: #000000;">        // 获取SqlSession工厂对象
</span><span style="color: #008080;">124</span> <span style="color: #000000;">        SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(is);
</span><span style="color: #008080;">125</span> <span style="color: #000000;">        // 获取sqlSession对象
</span><span style="color: #008080;">126</span> <span style="color: #000000;">        SqlSession sqlSession = factory.openSession();
</span><span style="color: #008080;">127</span> <span style="color: #000000;">        // 通过sqlSession对象获取代理对象
</span><span style="color: #008080;">128</span> <span style="color: #000000;">        EmpDao mapper = sqlSession.getMapper(EmpDao.class);
</span><span style="color: #008080;">129</span> <span style="color: #000000;">        // 创建emp对象
</span><span style="color: #008080;">130</span> <span style="color: #000000;">        Emp emp = new Emp();
</span><span style="color: #008080;">131</span> <span style="color: #000000;">        emp.setId(12);
</span><span style="color: #008080;">132</span> <span style="color: #000000;">        emp.setName("panda");
</span><span style="color: #008080;">133</span> <span style="color: #000000;">        // 通过代理对象调用相应接口方法
</span><span style="color: #008080;">134</span> <span style="color: #000000;">        try {
</span><span style="color: #008080;">135</span> <span style="color: #000000;">            mapper.updateEmp(emp);
</span><span style="color: #008080;">136</span> <span style="color: #000000;">            sqlSession.commit();
</span><span style="color: #008080;">137</span> <span style="color: #000000;">        } catch (Exception e) {
</span><span style="color: #008080;">138</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;">139</span> <span style="color: #000000;">        } finally {
</span><span style="color: #008080;">140</span> <span style="color: #000000;">            sqlSession.close();
</span><span style="color: #008080;">141</span> <span style="color: #000000;">            is.close();
</span><span style="color: #008080;">142</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">143</span> <span style="color: #000000;">        System.out.println(emp);
</span><span style="color: #008080;">144</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">145</span> 
<span style="color: #008080;">146</span> <span style="color: #000000;">    // 删除员工
</span><span style="color: #008080;">147</span> <span style="color: #000000;">    @Test
</span><span style="color: #008080;">148</span> <span style="color: #000000;">    public void testDeletEmpById() throws Exception {
</span><span style="color: #008080;">149</span> <span style="color: #000000;">        // 通过流获取主配置文件
</span><span style="color: #008080;">150</span> <span style="color: #000000;">        InputStream is = Resources.getResourceAsStream("mybatis-config.xml");
</span><span style="color: #008080;">151</span> <span style="color: #000000;">        // 获取SqlSession工厂对象
</span><span style="color: #008080;">152</span> <span style="color: #000000;">        SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(is);
</span><span style="color: #008080;">153</span> <span style="color: #000000;">        // 获取sqlSession对象
</span><span style="color: #008080;">154</span> <span style="color: #000000;">        SqlSession sqlSession = factory.openSession();
</span><span style="color: #008080;">155</span> <span style="color: #000000;">        // 通过sqlSession对象获取代理对象
</span><span style="color: #008080;">156</span> <span style="color: #000000;">        EmpDao mapper = sqlSession.getMapper(EmpDao.class);
</span><span style="color: #008080;">157</span> <span style="color: #000000;">        // 通过代理对象调用相应接口方法
</span><span style="color: #008080;">158</span> <span style="color: #000000;">        try {
</span><span style="color: #008080;">159</span> <span style="color: #000000;">            mapper.deleteEmpById(12);
</span><span style="color: #008080;">160</span> <span style="color: #000000;">            sqlSession.commit();
</span><span style="color: #008080;">161</span> <span style="color: #000000;">        } catch (Exception e) {
</span><span style="color: #008080;">162</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;">163</span> <span style="color: #000000;">        } finally {
</span><span style="color: #008080;">164</span> <span style="color: #000000;">            sqlSession.close();
</span><span style="color: #008080;">165</span> <span style="color: #000000;">            is.close();
</span><span style="color: #008080;">166</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">167</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">168</span> 
<span style="color: #008080;">169</span> <span style="color: #000000;">    // 通过id和name获取单个Emp对象
</span><span style="color: #008080;">170</span> <span style="color: #000000;">    @Test
</span><span style="color: #008080;">171</span> <span style="color: #000000;">    public void testGetEmpByIdAndName() throws Exception {
</span><span style="color: #008080;">172</span> <span style="color: #000000;">        // 通过流获取主配置文件
</span><span style="color: #008080;">173</span> <span style="color: #000000;">        InputStream is = Resources.getResourceAsStream("mybatis-config.xml");
</span><span style="color: #008080;">174</span> <span style="color: #000000;">        // 获取SqlSession工厂对象
</span><span style="color: #008080;">175</span> <span style="color: #000000;">        SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(is);
</span><span style="color: #008080;">176</span> <span style="color: #000000;">        // 获取sqlSession对象
</span><span style="color: #008080;">177</span> <span style="color: #000000;">        SqlSession sqlSession = factory.openSession();
</span><span style="color: #008080;">178</span> <span style="color: #000000;">        // 通过sqlSession对象获取代理对象
</span><span style="color: #008080;">179</span> <span style="color: #000000;">        EmpDao mapper = sqlSession.getMapper(EmpDao.class);
</span><span style="color: #008080;">180</span> <span style="color: #000000;">        // 通过代理对象调用相应接口方法
</span><span style="color: #008080;">181</span> <span style="color: #000000;">        try {
</span><span style="color: #008080;">182</span> <span style="color: #000000;">            Emp empByIdAndName = mapper.getEmpByIdAndName(1, "A");
</span><span style="color: #008080;">183</span> <span style="color: #000000;">            sqlSession.commit();
</span><span style="color: #008080;">184</span> <span style="color: #000000;">            System.out.println(empByIdAndName);
</span><span style="color: #008080;">185</span> <span style="color: #000000;">        } catch (Exception e) {
</span><span style="color: #008080;">186</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;">187</span> <span style="color: #000000;">        } finally {
</span><span style="color: #008080;">188</span> <span style="color: #000000;">            sqlSession.close();
</span><span style="color: #008080;">189</span> <span style="color: #000000;">            is.close();
</span><span style="color: #008080;">190</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">191</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">192</span> 
<span style="color: #008080;">193</span> <span style="color: #000000;">    // 通过id和name获取单个Emp对象使用命名参数
</span><span style="color: #008080;">194</span> <span style="color: #000000;">    @Test
</span><span style="color: #008080;">195</span> <span style="color: #000000;">    public void testGetEmpByIdAndNameByAtParam() throws Exception {
</span><span style="color: #008080;">196</span> <span style="color: #000000;">        // 通过流获取主配置文件
</span><span style="color: #008080;">197</span> <span style="color: #000000;">        InputStream is = Resources.getResourceAsStream("mybatis-config.xml");
</span><span style="color: #008080;">198</span> <span style="color: #000000;">        // 获取SqlSession工厂对象
</span><span style="color: #008080;">199</span> <span style="color: #000000;">        SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(is);
</span><span style="color: #008080;">200</span> <span style="color: #000000;">        // 获取sqlSession对象
</span><span style="color: #008080;">201</span> <span style="color: #000000;">        SqlSession sqlSession = factory.openSession();
</span><span style="color: #008080;">202</span> <span style="color: #000000;">        // 通过sqlSession对象获取代理对象
</span><span style="color: #008080;">203</span> <span style="color: #000000;">        EmpDao mapper = sqlSession.getMapper(EmpDao.class);
</span><span style="color: #008080;">204</span> <span style="color: #000000;">        // 通过代理对象调用相应接口方法
</span><span style="color: #008080;">205</span> <span style="color: #000000;">        try {
</span><span style="color: #008080;">206</span> <span style="color: #000000;">            Emp empByIdAndNameByAtParam = mapper.getEmpByIdAndNameByAtParam(1, "A");
</span><span style="color: #008080;">207</span> <span style="color: #000000;">            sqlSession.commit();
</span><span style="color: #008080;">208</span> <span style="color: #000000;">            System.out.println(empByIdAndNameByAtParam);
</span><span style="color: #008080;">209</span> <span style="color: #000000;">        } catch (Exception e) {
</span><span style="color: #008080;">210</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;">211</span> <span style="color: #000000;">        } finally {
</span><span style="color: #008080;">212</span> <span style="color: #000000;">            sqlSession.close();
</span><span style="color: #008080;">213</span> <span style="color: #000000;">            is.close();
</span><span style="color: #008080;">214</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">215</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">216</span> 
<span style="color: #008080;">217</span> <span style="color: #000000;">    // Map方式通过id和name获取单个Emp对象
</span><span style="color: #008080;">218</span> <span style="color: #000000;">    @Test
</span><span style="color: #008080;">219</span> <span style="color: #000000;">    public void testGetEmpByIdAndNameByMap() throws Exception {
</span><span style="color: #008080;">220</span> <span style="color: #000000;">        // 通过流获取主配置文件
</span><span style="color: #008080;">221</span> <span style="color: #000000;">        InputStream is = Resources.getResourceAsStream("mybatis-config.xml");
</span><span style="color: #008080;">222</span> <span style="color: #000000;">        // 获取SqlSession工厂对象
</span><span style="color: #008080;">223</span> <span style="color: #000000;">        SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(is);
</span><span style="color: #008080;">224</span> <span style="color: #000000;">        // 获取sqlSession对象
</span><span style="color: #008080;">225</span> <span style="color: #000000;">        SqlSession sqlSession = factory.openSession();
</span><span style="color: #008080;">226</span> <span style="color: #000000;">        // 通过sqlSession对象获取代理对象
</span><span style="color: #008080;">227</span> <span style="color: #000000;">        EmpDao mapper = sqlSession.getMapper(EmpDao.class);
</span><span style="color: #008080;">228</span> <span style="color: #000000;">        // 通过代理对象调用相应接口方法
</span><span style="color: #008080;">229</span> <span style="color: #000000;">        try {
</span><span style="color: #008080;">230</span>             HashMap<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">String</span><span style="color: #ff0000;">, Object</span><span style="color: #0000ff;">&gt;</span> map = new HashMap<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">String</span><span style="color: #ff0000;">, Object</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">();
</span><span style="color: #008080;">231</span> <span style="color: #000000;">            map.put("id", 1);
</span><span style="color: #008080;">232</span> <span style="color: #000000;">            map.put("name", "A");
</span><span style="color: #008080;">233</span> <span style="color: #000000;">            Emp empByIdAndNameByMap = mapper.getEmpByIdAndNameByMap(map);
</span><span style="color: #008080;">234</span> <span style="color: #000000;">            sqlSession.commit();
</span><span style="color: #008080;">235</span> <span style="color: #000000;">            System.out.println(empByIdAndNameByMap);
</span><span style="color: #008080;">236</span> <span style="color: #000000;">        } catch (Exception e) {
</span><span style="color: #008080;">237</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;">238</span> <span style="color: #000000;">        } finally {
</span><span style="color: #008080;">239</span> <span style="color: #000000;">            sqlSession.close();
</span><span style="color: #008080;">240</span> <span style="color: #000000;">            is.close();
</span><span style="color: #008080;">241</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">242</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">243</span> 
<span style="color: #008080;">244</span> <span style="color: #000000;">    // 通过id查询一条结果并封装成Map
</span><span style="color: #008080;">245</span> <span style="color: #000000;">    @Test
</span><span style="color: #008080;">246</span> <span style="color: #000000;">    public void testGetEmpByIdReturnMap() throws Exception {
</span><span style="color: #008080;">247</span> <span style="color: #000000;">        // 通过流获取主配置文件
</span><span style="color: #008080;">248</span> <span style="color: #000000;">        InputStream is = Resources.getResourceAsStream("mybatis-config.xml");
</span><span style="color: #008080;">249</span> <span style="color: #000000;">        // 获取SqlSession工厂对象
</span><span style="color: #008080;">250</span> <span style="color: #000000;">        SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(is);
</span><span style="color: #008080;">251</span> <span style="color: #000000;">        // 获取sqlSession对象
</span><span style="color: #008080;">252</span> <span style="color: #000000;">        SqlSession sqlSession = factory.openSession();
</span><span style="color: #008080;">253</span> <span style="color: #000000;">        // 通过sqlSession对象获取代理对象
</span><span style="color: #008080;">254</span> <span style="color: #000000;">        EmpDao mapper = sqlSession.getMapper(EmpDao.class);
</span><span style="color: #008080;">255</span> <span style="color: #000000;">        // 通过代理对象调用相应接口方法
</span><span style="color: #008080;">256</span> <span style="color: #000000;">        try {
</span><span style="color: #008080;">257</span>             Map<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">String</span><span style="color: #ff0000;">, Object</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"> empByIdReturnMap = mapper.getEmpByIdReturnMap(1);
</span><span style="color: #008080;">258</span> <span style="color: #000000;">            System.out.println(empByIdReturnMap);
</span><span style="color: #008080;">259</span> <span style="color: #000000;">        } catch (Exception e) {
</span><span style="color: #008080;">260</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;">261</span> <span style="color: #000000;">        } finally {
</span><span style="color: #008080;">262</span> <span style="color: #000000;">            sqlSession.close();
</span><span style="color: #008080;">263</span> <span style="color: #000000;">            is.close();
</span><span style="color: #008080;">264</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">265</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">266</span> 
<span style="color: #008080;">267</span> <span style="color: #000000;">    // 通过id条件查询多条结果并封装成Map
</span><span style="color: #008080;">268</span> <span style="color: #000000;">    @Test
</span><span style="color: #008080;">269</span> <span style="color: #000000;">    public void testGetEmpsByIdReturnMap() throws Exception {
</span><span style="color: #008080;">270</span> <span style="color: #000000;">        // 通过流获取主配置文件
</span><span style="color: #008080;">271</span> <span style="color: #000000;">        InputStream is = Resources.getResourceAsStream("mybatis-config.xml");
</span><span style="color: #008080;">272</span> <span style="color: #000000;">        // 获取SqlSession工厂对象
</span><span style="color: #008080;">273</span> <span style="color: #000000;">        SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(is);
</span><span style="color: #008080;">274</span> <span style="color: #000000;">        // 获取sqlSession对象
</span><span style="color: #008080;">275</span> <span style="color: #000000;">        SqlSession sqlSession = factory.openSession();
</span><span style="color: #008080;">276</span> <span style="color: #000000;">        // 通过sqlSession对象获取代理对象
</span><span style="color: #008080;">277</span> <span style="color: #000000;">        EmpDao mapper = sqlSession.getMapper(EmpDao.class);
</span><span style="color: #008080;">278</span> <span style="color: #000000;">        // 通过代理对象调用相应接口方法
</span><span style="color: #008080;">279</span> <span style="color: #000000;">        try {
</span><span style="color: #008080;">280</span>             Map<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Integer</span><span style="color: #ff0000;">, Emp</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"> empsByIdReturnMap = mapper.getEmpsByIdReturnMap(5);
</span><span style="color: #008080;">281</span> <span style="color: #000000;">            System.out.println(empsByIdReturnMap);
</span><span style="color: #008080;">282</span> <span style="color: #000000;">        } catch (Exception e) {
</span><span style="color: #008080;">283</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;">284</span> <span style="color: #000000;">        } finally {
</span><span style="color: #008080;">285</span> <span style="color: #000000;">            sqlSession.close();
</span><span style="color: #008080;">286</span> <span style="color: #000000;">            is.close();
</span><span style="color: #008080;">287</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">288</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">289</span> 
<span style="color: #008080;">290</span> <span style="color: #000000;">    // 通过Id获取单个Emp对象级联dep对象使用resultMap
</span><span style="color: #008080;">291</span> <span style="color: #000000;">    @Test
</span><span style="color: #008080;">292</span> <span style="color: #000000;">    public void testGetEmpAndDepByIdUseResultMap() throws Exception {
</span><span style="color: #008080;">293</span> <span style="color: #000000;">        // 通过流获取主配置文件
</span><span style="color: #008080;">294</span> <span style="color: #000000;">        InputStream is = Resources.getResourceAsStream("mybatis-config.xml");
</span><span style="color: #008080;">295</span> <span style="color: #000000;">        // 获取SqlSession工厂对象
</span><span style="color: #008080;">296</span> <span style="color: #000000;">        SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(is);
</span><span style="color: #008080;">297</span> <span style="color: #000000;">        // 获取sqlSession对象
</span><span style="color: #008080;">298</span> <span style="color: #000000;">        SqlSession sqlSession = factory.openSession();
</span><span style="color: #008080;">299</span> <span style="color: #000000;">        // 通过sqlSession对象获取代理对象
</span><span style="color: #008080;">300</span> <span style="color: #000000;">        EmpDao mapper = sqlSession.getMapper(EmpDao.class);
</span><span style="color: #008080;">301</span> <span style="color: #000000;">        // 通过代理对象调用相应接口方法
</span><span style="color: #008080;">302</span> <span style="color: #000000;">        try {
</span><span style="color: #008080;">303</span> <span style="color: #000000;">            Emp empAndDepByIdUseResultMap = mapper.getEmpAndDepByIdUseResultMap(1);
</span><span style="color: #008080;">304</span> <span style="color: #000000;">            System.out.println(empAndDepByIdUseResultMap);
</span><span style="color: #008080;">305</span> <span style="color: #000000;">        } catch (Exception e) {
</span><span style="color: #008080;">306</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;">307</span> <span style="color: #000000;">        } finally {
</span><span style="color: #008080;">308</span> <span style="color: #000000;">            sqlSession.close();
</span><span style="color: #008080;">309</span> <span style="color: #000000;">            is.close();
</span><span style="color: #008080;">310</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">311</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">312</span> 
<span style="color: #008080;">313</span> <span style="color: #000000;">    // 通过Id获取单个Emp对象级联dep对象使用associate分步查询
</span><span style="color: #008080;">314</span> <span style="color: #000000;">    @Test
</span><span style="color: #008080;">315</span> <span style="color: #000000;">    public void testGetEmpAndDepByIdUseStep() throws Exception {
</span><span style="color: #008080;">316</span> <span style="color: #000000;">        // 通过流获取主配置文件
</span><span style="color: #008080;">317</span> <span style="color: #000000;">        InputStream is = Resources.getResourceAsStream("mybatis-config.xml");
</span><span style="color: #008080;">318</span> <span style="color: #000000;">        // 获取SqlSession工厂对象
</span><span style="color: #008080;">319</span> <span style="color: #000000;">        SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(is);
</span><span style="color: #008080;">320</span> <span style="color: #000000;">        // 获取sqlSession对象
</span><span style="color: #008080;">321</span> <span style="color: #000000;">        SqlSession sqlSession = factory.openSession();
</span><span style="color: #008080;">322</span> <span style="color: #000000;">        // 通过sqlSession对象获取代理对象
</span><span style="color: #008080;">323</span> <span style="color: #000000;">        EmpDao mapper = sqlSession.getMapper(EmpDao.class);
</span><span style="color: #008080;">324</span> <span style="color: #000000;">        // 通过代理对象调用相应接口方法
</span><span style="color: #008080;">325</span> <span style="color: #000000;">        try {
</span><span style="color: #008080;">326</span> <span style="color: #000000;">            Emp empAndDepByIdUseStep = mapper.getEmpAndDepByIdUseStep(1);
</span><span style="color: #008080;">327</span> <span style="color: #000000;">            // 开启延迟加载后查询empAndDepByIdUseStep则执行两条语句
</span><span style="color: #008080;">328</span> <span style="color: #000000;">            // System.out.println(empAndDepByIdUseStep);
</span><span style="color: #008080;">329</span> <span style="color: #000000;">            // 开启延迟加载后查询empAndDepByIdUseStep.getName()则只执行一条语句
</span><span style="color: #008080;">330</span> <span style="color: #000000;">            System.out.println(empAndDepByIdUseStep.getName());
</span><span style="color: #008080;">331</span> <span style="color: #000000;">        } catch (Exception e) {
</span><span style="color: #008080;">332</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;">333</span> <span style="color: #000000;">        } finally {
</span><span style="color: #008080;">334</span> <span style="color: #000000;">            sqlSession.close();
</span><span style="color: #008080;">335</span> <span style="color: #000000;">            is.close();
</span><span style="color: #008080;">336</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">337</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">338</span> 
<span style="color: #008080;">339</span> <span style="color: #000000;">    // 通过Id获取Dep对象及其下属子集Emp
</span><span style="color: #008080;">340</span> <span style="color: #000000;">    @Test
</span><span style="color: #008080;">341</span> <span style="color: #000000;">    public void testGetDepAndEmpsByIdUseCollection() throws Exception {
</span><span style="color: #008080;">342</span> <span style="color: #000000;">        // 通过流获取主配置文件
</span><span style="color: #008080;">343</span> <span style="color: #000000;">        InputStream is = Resources.getResourceAsStream("mybatis-config.xml");
</span><span style="color: #008080;">344</span> <span style="color: #000000;">        // 获取SqlSession工厂对象
</span><span style="color: #008080;">345</span> <span style="color: #000000;">        SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(is);
</span><span style="color: #008080;">346</span> <span style="color: #000000;">        // 获取sqlSession对象
</span><span style="color: #008080;">347</span> <span style="color: #000000;">        SqlSession sqlSession = factory.openSession();
</span><span style="color: #008080;">348</span> <span style="color: #000000;">        // 通过sqlSession对象获取代理对象
</span><span style="color: #008080;">349</span> <span style="color: #000000;">        EmpDao mapper = sqlSession.getMapper(EmpDao.class);
</span><span style="color: #008080;">350</span> <span style="color: #000000;">        // 通过代理对象调用相应接口方法
</span><span style="color: #008080;">351</span> <span style="color: #000000;">        try {
</span><span style="color: #008080;">352</span> <span style="color: #000000;">            Dep depAndEmpsByIdUseCollection = mapper.getDepAndEmpsByIdUseCollection(4);
</span><span style="color: #008080;">353</span> <span style="color: #000000;">            System.out.println(depAndEmpsByIdUseCollection);
</span><span style="color: #008080;">354</span> <span style="color: #000000;">            System.out.println(depAndEmpsByIdUseCollection.getEmps());
</span><span style="color: #008080;">355</span> <span style="color: #000000;">        } catch (Exception e) {
</span><span style="color: #008080;">356</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;">357</span> <span style="color: #000000;">        } finally {
</span><span style="color: #008080;">358</span> <span style="color: #000000;">            sqlSession.close();
</span><span style="color: #008080;">359</span> <span style="color: #000000;">            is.close();
</span><span style="color: #008080;">360</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">361</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">362</span> 
<span style="color: #008080;">363</span> <span style="color: #000000;">    // 通过Id获取单个Dep对象级联Emps对象集使用collection分步查询
</span><span style="color: #008080;">364</span> <span style="color: #000000;">    @Test
</span><span style="color: #008080;">365</span> <span style="color: #000000;">    public void testGetDepAndEmpsByIdUseStep() throws Exception {
</span><span style="color: #008080;">366</span> <span style="color: #000000;">        // 通过流获取主配置文件
</span><span style="color: #008080;">367</span> <span style="color: #000000;">        InputStream is = Resources.getResourceAsStream("mybatis-config.xml");
</span><span style="color: #008080;">368</span> <span style="color: #000000;">        // 获取SqlSession工厂对象
</span><span style="color: #008080;">369</span> <span style="color: #000000;">        SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(is);
</span><span style="color: #008080;">370</span> <span style="color: #000000;">        // 获取sqlSession对象
</span><span style="color: #008080;">371</span> <span style="color: #000000;">        SqlSession sqlSession = factory.openSession();
</span><span style="color: #008080;">372</span> <span style="color: #000000;">        // 通过sqlSession对象获取代理对象
</span><span style="color: #008080;">373</span> <span style="color: #000000;">        EmpDao mapper = sqlSession.getMapper(EmpDao.class);
</span><span style="color: #008080;">374</span> <span style="color: #000000;">        // 通过代理对象调用相应接口方法
</span><span style="color: #008080;">375</span> <span style="color: #000000;">        try {
</span><span style="color: #008080;">376</span> <span style="color: #000000;">            Dep depAndEmpsByIdUseStep = mapper.getDepAndEmpsByIdUseStep(4);
</span><span style="color: #008080;">377</span> <span style="color: #000000;">            // 调用depAndEmpsByIdUseStep.getDep_name()验证只执行一条语句
</span><span style="color: #008080;">378</span> <span style="color: #000000;">            System.out.println(depAndEmpsByIdUseStep.getDep_name());
</span><span style="color: #008080;">379</span> <span style="color: #000000;">            // 调用depAndEmpsByIdUseStep验证执行两条语句
</span><span style="color: #008080;">380</span> <span style="color: #000000;">            System.out.println(depAndEmpsByIdUseStep);
</span><span style="color: #008080;">381</span> <span style="color: #000000;">        } catch (Exception e) {
</span><span style="color: #008080;">382</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;">383</span> <span style="color: #000000;">        } finally {
</span><span style="color: #008080;">384</span> <span style="color: #000000;">            sqlSession.close();
</span><span style="color: #008080;">385</span> <span style="color: #000000;">            is.close();
</span><span style="color: #008080;">386</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">387</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">388</span> 
<span style="color: #008080;">389</span> }</code></pre>

<pre><code><span style="font-size: 18px;">2.MybatisDynamicSqlTest.java(动态部分)</span></code></pre>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;">  1</span> <span style="color: #000000;">package com.panda.test;
</span><span style="color: #008080;">  2</span> 
<span style="color: #008080;">  3</span> <span style="color: #000000;">import java.io.InputStream;
</span><span style="color: #008080;">  4</span> <span style="color: #000000;">import java.util.ArrayList;
</span><span style="color: #008080;">  5</span> <span style="color: #000000;">import java.util.List;
</span><span style="color: #008080;">  6</span> <span style="color: #000000;">import org.apache.ibatis.io.Resources;
</span><span style="color: #008080;">  7</span> <span style="color: #000000;">import org.apache.ibatis.session.SqlSession;
</span><span style="color: #008080;">  8</span> <span style="color: #000000;">import org.apache.ibatis.session.SqlSessionFactory;
</span><span style="color: #008080;">  9</span> <span style="color: #000000;">import org.apache.ibatis.session.SqlSessionFactoryBuilder;
</span><span style="color: #008080;"> 10</span> <span style="color: #000000;">import org.junit.Test;
</span><span style="color: #008080;"> 11</span> <span style="color: #000000;">import com.panda.beans.Emp;
</span><span style="color: #008080;"> 12</span> <span style="color: #000000;">import com.panda.dao.EmpDynamicSqlDao;
</span><span style="color: #008080;"> 13</span> 
<span style="color: #008080;"> 14</span> <span style="color: #000000;">/**
</span><span style="color: #008080;"> 15</span> <span style="color: #000000;"> * @author Jpanda
</span><span style="color: #008080;"> 16</span> <span style="color: #000000;"> */
</span><span style="color: #008080;"> 17</span> <span style="color: #000000;">public class MybatisDynamicSqlTest {
</span><span style="color: #008080;"> 18</span> <span style="color: #000000;">    // ifwhere多条件动态sql查询Emps集
</span><span style="color: #008080;"> 19</span> <span style="color: #000000;">    @Test
</span><span style="color: #008080;"> 20</span> <span style="color: #000000;">    public void testGetEmpsByConditionIfWhere() throws Exception {
</span><span style="color: #008080;"> 21</span> <span style="color: #000000;">        // 通过流获取主配置文件
</span><span style="color: #008080;"> 22</span> <span style="color: #000000;">        InputStream is = Resources.getResourceAsStream("mybatis-config.xml");
</span><span style="color: #008080;"> 23</span> <span style="color: #000000;">        // 获取SqlSession工厂对象
</span><span style="color: #008080;"> 24</span> <span style="color: #000000;">        SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(is);
</span><span style="color: #008080;"> 25</span> <span style="color: #000000;">        // 获取sqlSession对象
</span><span style="color: #008080;"> 26</span> <span style="color: #000000;">        SqlSession sqlSession = factory.openSession();
</span><span style="color: #008080;"> 27</span> <span style="color: #000000;">        // 通过sqlSession对象获取代理对象
</span><span style="color: #008080;"> 28</span> <span style="color: #000000;">        EmpDynamicSqlDao mapper = sqlSession.getMapper(EmpDynamicSqlDao.class);
</span><span style="color: #008080;"> 29</span> <span style="color: #000000;">        // 通过代理对象调用相应接口方法
</span><span style="color: #008080;"> 30</span> <span style="color: #000000;">        try {
</span><span style="color: #008080;"> 31</span> <span style="color: #000000;">            Emp condition = new Emp();
</span><span style="color: #008080;"> 32</span> <span style="color: #000000;">            condition.setId(1);
</span><span style="color: #008080;"> 33</span> <span style="color: #000000;">            condition.setName("A");
</span><span style="color: #008080;"> 34</span> <span style="color: #000000;">            condition.setEmail("1@QQ.COM");
</span><span style="color: #008080;"> 35</span> <span style="color: #000000;">            condition.setGender("男");
</span><span style="color: #008080;"> 36</span>             List<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Emp</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"> empsByConditionIfWhere = mapper.getEmpsByConditionIfWhere(condition);
</span><span style="color: #008080;"> 37</span> <span style="color: #000000;">            System.out.println(empsByConditionIfWhere);
</span><span style="color: #008080;"> 38</span> <span style="color: #000000;">        } catch (Exception e) {
</span><span style="color: #008080;"> 39</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;"> 40</span> <span style="color: #000000;">        } finally {
</span><span style="color: #008080;"> 41</span> <span style="color: #000000;">            sqlSession.close();
</span><span style="color: #008080;"> 42</span> <span style="color: #000000;">            is.close();
</span><span style="color: #008080;"> 43</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 44</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 45</span> 
<span style="color: #008080;"> 46</span> <span style="color: #000000;">    // iftrim多条件动态sql查询Emps集
</span><span style="color: #008080;"> 47</span> <span style="color: #000000;">    @Test
</span><span style="color: #008080;"> 48</span> <span style="color: #000000;">    public void testGetEmpsByConditionIfTrim() throws Exception {
</span><span style="color: #008080;"> 49</span> <span style="color: #000000;">        // 通过流获取主配置文件
</span><span style="color: #008080;"> 50</span> <span style="color: #000000;">        InputStream is = Resources.getResourceAsStream("mybatis-config.xml");
</span><span style="color: #008080;"> 51</span> <span style="color: #000000;">        // 获取SqlSession工厂对象
</span><span style="color: #008080;"> 52</span> <span style="color: #000000;">        SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(is);
</span><span style="color: #008080;"> 53</span> <span style="color: #000000;">        // 获取sqlSession对象
</span><span style="color: #008080;"> 54</span> <span style="color: #000000;">        SqlSession sqlSession = factory.openSession();
</span><span style="color: #008080;"> 55</span> <span style="color: #000000;">        // 通过sqlSession对象获取代理对象
</span><span style="color: #008080;"> 56</span> <span style="color: #000000;">        EmpDynamicSqlDao mapper = sqlSession.getMapper(EmpDynamicSqlDao.class);
</span><span style="color: #008080;"> 57</span> <span style="color: #000000;">        // 通过代理对象调用相应接口方法
</span><span style="color: #008080;"> 58</span> <span style="color: #000000;">        try {
</span><span style="color: #008080;"> 59</span> <span style="color: #000000;">            Emp condition = new Emp();
</span><span style="color: #008080;"> 60</span> <span style="color: #000000;">            condition.setId(1);
</span><span style="color: #008080;"> 61</span> <span style="color: #000000;">            condition.setName("A");
</span><span style="color: #008080;"> 62</span> <span style="color: #000000;">            condition.setEmail("1@QQ.COM");
</span><span style="color: #008080;"> 63</span> <span style="color: #000000;">            // condition.setGender("男");
</span><span style="color: #008080;"> 64</span>             List<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Emp</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"> empsByConditionIfTrim = mapper.getEmpsByConditionIfTrim(condition);
</span><span style="color: #008080;"> 65</span> <span style="color: #000000;">            System.out.println(empsByConditionIfTrim);
</span><span style="color: #008080;"> 66</span> <span style="color: #000000;">        } catch (Exception e) {
</span><span style="color: #008080;"> 67</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;"> 68</span> <span style="color: #000000;">        } finally {
</span><span style="color: #008080;"> 69</span> <span style="color: #000000;">            sqlSession.close();
</span><span style="color: #008080;"> 70</span> <span style="color: #000000;">            is.close();
</span><span style="color: #008080;"> 71</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 72</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 73</span> 
<span style="color: #008080;"> 74</span> <span style="color: #000000;">    // choose多条件逐一判断动态sql查询Emps值
</span><span style="color: #008080;"> 75</span> <span style="color: #000000;">    @Test
</span><span style="color: #008080;"> 76</span> <span style="color: #000000;">    public void testGetEmpsByConditionChoose() throws Exception {
</span><span style="color: #008080;"> 77</span> <span style="color: #000000;">        // 通过流获取主配置文件
</span><span style="color: #008080;"> 78</span> <span style="color: #000000;">        InputStream is = Resources.getResourceAsStream("mybatis-config.xml");
</span><span style="color: #008080;"> 79</span> <span style="color: #000000;">        // 获取SqlSession工厂对象
</span><span style="color: #008080;"> 80</span> <span style="color: #000000;">        SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(is);
</span><span style="color: #008080;"> 81</span> <span style="color: #000000;">        // 获取sqlSession对象
</span><span style="color: #008080;"> 82</span> <span style="color: #000000;">        SqlSession sqlSession = factory.openSession();
</span><span style="color: #008080;"> 83</span> <span style="color: #000000;">        // 通过sqlSession对象获取代理对象
</span><span style="color: #008080;"> 84</span> <span style="color: #000000;">        EmpDynamicSqlDao mapper = sqlSession.getMapper(EmpDynamicSqlDao.class);
</span><span style="color: #008080;"> 85</span> <span style="color: #000000;">        // 通过代理对象调用相应接口方法
</span><span style="color: #008080;"> 86</span> <span style="color: #000000;">        try {
</span><span style="color: #008080;"> 87</span> <span style="color: #000000;">            Emp condition = new Emp();
</span><span style="color: #008080;"> 88</span> <span style="color: #000000;">            condition.setId(1);
</span><span style="color: #008080;"> 89</span> <span style="color: #000000;">            condition.setName("A");
</span><span style="color: #008080;"> 90</span> <span style="color: #000000;">            condition.setEmail("1@QQ.COM");
</span><span style="color: #008080;"> 91</span> <span style="color: #000000;">            condition.setGender("男");
</span><span style="color: #008080;"> 92</span>             List<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Emp</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"> empsByConditionChoose = mapper.getEmpsByConditionChoose(condition);
</span><span style="color: #008080;"> 93</span> <span style="color: #000000;">            System.out.println(empsByConditionChoose);
</span><span style="color: #008080;"> 94</span> <span style="color: #000000;">        } catch (Exception e) {
</span><span style="color: #008080;"> 95</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;"> 96</span> <span style="color: #000000;">        } finally {
</span><span style="color: #008080;"> 97</span> <span style="color: #000000;">            sqlSession.close();
</span><span style="color: #008080;"> 98</span> <span style="color: #000000;">            is.close();
</span><span style="color: #008080;"> 99</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">100</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">101</span> 
<span style="color: #008080;">102</span> <span style="color: #000000;">    // foreach查询Emps集
</span><span style="color: #008080;">103</span> <span style="color: #000000;">    @Test
</span><span style="color: #008080;">104</span> <span style="color: #000000;">    public void testGetEmpsByIdsForeach() throws Exception {
</span><span style="color: #008080;">105</span> <span style="color: #000000;">        // 通过流获取主配置文件
</span><span style="color: #008080;">106</span> <span style="color: #000000;">        InputStream is = Resources.getResourceAsStream("mybatis-config.xml");
</span><span style="color: #008080;">107</span> <span style="color: #000000;">        // 获取SqlSession工厂对象
</span><span style="color: #008080;">108</span> <span style="color: #000000;">        SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(is);
</span><span style="color: #008080;">109</span> <span style="color: #000000;">        // 获取sqlSession对象
</span><span style="color: #008080;">110</span> <span style="color: #000000;">        SqlSession sqlSession = factory.openSession();
</span><span style="color: #008080;">111</span> <span style="color: #000000;">        // 通过sqlSession对象获取代理对象
</span><span style="color: #008080;">112</span> <span style="color: #000000;">        EmpDynamicSqlDao mapper = sqlSession.getMapper(EmpDynamicSqlDao.class);
</span><span style="color: #008080;">113</span> <span style="color: #000000;">        // 通过代理对象调用相应接口方法
</span><span style="color: #008080;">114</span> <span style="color: #000000;">        try {
</span><span style="color: #008080;">115</span>             List<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Integer</span><span style="color: #0000ff;">&gt;</span> ids = new ArrayList<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Integer</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">();
</span><span style="color: #008080;">116</span> <span style="color: #000000;">            ids.add(1);
</span><span style="color: #008080;">117</span> <span style="color: #000000;">            ids.add(2);
</span><span style="color: #008080;">118</span> <span style="color: #000000;">            ids.add(3);
</span><span style="color: #008080;">119</span>             List<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Emp</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"> empsByIdsForeach = mapper.getEmpsByIdsForeach(ids);
</span><span style="color: #008080;">120</span> <span style="color: #000000;">            System.out.println(empsByIdsForeach);
</span><span style="color: #008080;">121</span> <span style="color: #000000;">        } catch (Exception e) {
</span><span style="color: #008080;">122</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;">123</span> <span style="color: #000000;">        } finally {
</span><span style="color: #008080;">124</span> <span style="color: #000000;">            sqlSession.close();
</span><span style="color: #008080;">125</span> <span style="color: #000000;">            is.close();
</span><span style="color: #008080;">126</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">127</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">128</span> 
<span style="color: #008080;">129</span> <span style="color: #000000;">    // set多条件动态sql设置Emp值
</span><span style="color: #008080;">130</span> <span style="color: #000000;">    @Test
</span><span style="color: #008080;">131</span> <span style="color: #000000;">    public void testUpdateEmpByConditionIfSet() throws Exception {
</span><span style="color: #008080;">132</span> <span style="color: #000000;">        // 通过流获取主配置文件
</span><span style="color: #008080;">133</span> <span style="color: #000000;">        InputStream is = Resources.getResourceAsStream("mybatis-config.xml");
</span><span style="color: #008080;">134</span> <span style="color: #000000;">        // 获取SqlSession工厂对象
</span><span style="color: #008080;">135</span> <span style="color: #000000;">        SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(is);
</span><span style="color: #008080;">136</span> <span style="color: #000000;">        // 获取sqlSession对象
</span><span style="color: #008080;">137</span> <span style="color: #000000;">        SqlSession sqlSession = factory.openSession();
</span><span style="color: #008080;">138</span> <span style="color: #000000;">        // 通过sqlSession对象获取代理对象
</span><span style="color: #008080;">139</span> <span style="color: #000000;">        EmpDynamicSqlDao mapper = sqlSession.getMapper(EmpDynamicSqlDao.class);
</span><span style="color: #008080;">140</span> <span style="color: #000000;">        // 通过代理对象调用相应接口方法
</span><span style="color: #008080;">141</span> <span style="color: #000000;">        try {
</span><span style="color: #008080;">142</span> <span style="color: #000000;">            Emp condition = new Emp();
</span><span style="color: #008080;">143</span> <span style="color: #000000;">            condition.setId(13);
</span><span style="color: #008080;">144</span> <span style="color: #000000;">            condition.setName("Jpanda");
</span><span style="color: #008080;">145</span> <span style="color: #000000;">            condition.setEmail("Jpanda@QQ.COM");
</span><span style="color: #008080;">146</span> <span style="color: #000000;">            // condition.setGender("男");
</span><span style="color: #008080;">147</span> <span style="color: #000000;">            mapper.updateEmpByConditionIfSet(condition);
</span><span style="color: #008080;">148</span> <span style="color: #000000;">            sqlSession.commit();
</span><span style="color: #008080;">149</span> <span style="color: #000000;">        } catch (Exception e) {
</span><span style="color: #008080;">150</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;">151</span> <span style="color: #000000;">        } finally {
</span><span style="color: #008080;">152</span> <span style="color: #000000;">            sqlSession.close();
</span><span style="color: #008080;">153</span> <span style="color: #000000;">            is.close();
</span><span style="color: #008080;">154</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">155</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">156</span> 
<span style="color: #008080;">157</span> <span style="color: #000000;">    // foreach批量添加Emps
</span><span style="color: #008080;">158</span> <span style="color: #000000;">    @Test
</span><span style="color: #008080;">159</span> <span style="color: #000000;">    public void testInsertLotEmps() throws Exception {
</span><span style="color: #008080;">160</span> <span style="color: #000000;">        // 通过流获取主配置文件
</span><span style="color: #008080;">161</span> <span style="color: #000000;">        InputStream is = Resources.getResourceAsStream("mybatis-config.xml");
</span><span style="color: #008080;">162</span> <span style="color: #000000;">        // 获取SqlSession工厂对象
</span><span style="color: #008080;">163</span> <span style="color: #000000;">        SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(is);
</span><span style="color: #008080;">164</span> <span style="color: #000000;">        // 获取sqlSession对象
</span><span style="color: #008080;">165</span> <span style="color: #000000;">        SqlSession sqlSession = factory.openSession();
</span><span style="color: #008080;">166</span> <span style="color: #000000;">        // 通过sqlSession对象获取代理对象
</span><span style="color: #008080;">167</span> <span style="color: #000000;">        EmpDynamicSqlDao mapper = sqlSession.getMapper(EmpDynamicSqlDao.class);
</span><span style="color: #008080;">168</span> <span style="color: #000000;">        // 通过代理对象调用相应接口方法
</span><span style="color: #008080;">169</span> <span style="color: #000000;">        try {
</span><span style="color: #008080;">170</span>             ArrayList<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Emp</span><span style="color: #0000ff;">&gt;</span> emps = new ArrayList<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Emp</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">();
</span><span style="color: #008080;">171</span> <span style="color: #000000;">            emps.add(new Emp(null, "AA", "AA", "男", null));
</span><span style="color: #008080;">172</span> <span style="color: #000000;">            emps.add(new Emp(null, "BB", "BB", "男", null));
</span><span style="color: #008080;">173</span> <span style="color: #000000;">            emps.add(new Emp(null, "CC", "CC", "男", null));
</span><span style="color: #008080;">174</span> <span style="color: #000000;">            mapper.insertLotEmps(emps);
</span><span style="color: #008080;">175</span> <span style="color: #000000;">            sqlSession.commit();
</span><span style="color: #008080;">176</span> <span style="color: #000000;">        } catch (Exception e) {
</span><span style="color: #008080;">177</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;">178</span> <span style="color: #000000;">        } finally {
</span><span style="color: #008080;">179</span> <span style="color: #000000;">            sqlSession.close();
</span><span style="color: #008080;">180</span> <span style="color: #000000;">            is.close();
</span><span style="color: #008080;">181</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">182</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">183</span> }</code></pre>

<p><span style="font-size: 18px;">文章内容为本人自学尚硅谷Mybatis框架课程学习笔记，没有具体笔记，都融入到所有的代码和注释中了，我个人喜欢这样的笔记方式，内容命名方法和原始数据与原课程不相符，内容是在</span></p>
<p><span style="font-size: 18px;">自己的</span><span style="font-size: 18px;">理解的基础上写的。新手上路，其中</span><span style="font-size: 18px;">可能存在各种纰漏和bug，测试方法本人学习过程中都全部正确执行验证过了。本文目的仅为了自己以后回顾复习使用，快速复制自己的习惯搭建方式。</span></p>
<p><span style="font-size: 18px;">其中有很多代码可能在其它人看来无用或者多于，很多时候我是为了验证某个使用功能理解知识点人为构造的冗余过程，比如其中的有些resultMap映射，仅仅是为了验证该功能。课程中讲到的</span></p>
<p><span style="font-size: 18px;">知识点个人</span><span style="font-size: 18px;">感觉全部都有包括进去。当然仅仅使用配置文件模式，没有使用注解配置。</span></p>
<pre><code><br /><br /></code></pre>
<p>&nbsp;</p>
<pre><code></code></pre>
<p>&nbsp;</p>
<pre><code><span style="color: #0000ff;">&nbsp;</span></code></pre>

<p>&nbsp;</p>
<p style="text-align: left; margin-left: 30px;"><span style="font-size: 18px;"><em>&nbsp;</em></span></p>

</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>