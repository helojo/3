<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修类的加载过程' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>类的加载过程</center></div><div class='banquan'>原文出处:本文由博客园博主思思博士提供。<br/>
原文连接:https://www.cnblogs.com/guoyansi19900907/p/11990403.html</div><br>
    <p><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">加载==》链接==》初始化==》使用==》卸载</span></p>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 16px;"><img src="./images/类的加载过程0.png" alt="" /></span></p>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">&nbsp;</span></p>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">&nbsp;</span></p>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 16px;"><strong>加载：</strong>将.class文件转换成字节流，这一步完成之后到链接步骤</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;"><strong>链接</strong>步骤是对字节流进行验证、准备，解析三个过程。</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">	　　<strong>验证：</strong>确保被加载的文件正确性和安全性。</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">		　　<strong>正确性：</strong>确保.class文件解析成字节流后，是可以使用的。</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">		　　<strong>安全性：</strong>不至于危害虚拟机。</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">	　　　　而验证又分为文件验证，元数据验证，字节码验证，符号引用验证。</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">		　　<strong>文件验证：</strong>校验.class文件符合虚拟机规范。</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">		　　<strong>元数据验证：</strong>对类层面的语法进行分析，类信息符合java规范。</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">		　　<strong>字节码验证：</strong>主要验证类语法符合逻辑，不会危害java安全</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">		　　<strong>符号引用验证：</strong>对类以外的信息进行校验，确保解析动作能够完成。</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">	<strong>准备：</strong>为类变量分配内存并设置初始值。</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">		　　public static int value=2;</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">		　　在这个阶段会在方法区分配内存，并且赋值为0.</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">		　　public final static int value=2;</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">		　　这个是在编译的时候就把值确定了，分配在静态常量池中，</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">		　　在这个阶段会把它从静态常量池加载到方法区中。</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">	<strong>解析：</strong>将静态常量池中的符号引用转化成方法区中的直接引用。</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">		　　<strong>符号引用：</strong>以一组虚拟机自己能够认识的符号标识所引用的目标。</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">			　　　　比如一个人有可能叫张三，同时可能叫二狗子；他们都是指向同一个人。</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">		　　<strong>直接引用：</strong>就是我们平时常说的空指针异常的指针了，就是在虚拟机内存中直接指向这个对象的指针。</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">		　　　　主要解析对象是类，接口，字段，类方法，接口方法(我只能想到这么多了)等</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">	<strong>初始化：</strong>初始化是在第一次使用这个类的时候进行的。而上面的步骤是在便于这一步的初始化。</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">		　　<strong>第一次使用是什么时候呢？</strong></span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">		　　1.new的时候，初始化的实例信息放在堆中，而静态信息放在方法区中</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">		　　2.访问某个类或接口的静态变量或方法时</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">		　　3.new某个字类，父类会被一同初始化</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">		　　4.启动类</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">		　　5.对某个类进行反射操作。</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">	　　当然如果这个类之前已经初始化过了，再次访问就不需要初始化了。</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">		　　初始化的最终结果是将这些类信息存储在方法区中。</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">		　　并且把之前默认的静态变量赋值成我们指定的变量</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">说了这么一大坨东西，这些动作都是有谁来执行的呢？</span></p>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">答案是<span style="color: #ff0000;"><strong>类加载器</strong></span></span></p>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">&nbsp;</span></p>

</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>