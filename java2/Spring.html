<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Spring' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Spring</center></div><div class='banquan'>原文出处:本文由博客园博主张泽提供。<br/>
原文连接:https://www.cnblogs.com/zhangze-lifetime/p/11762147.html</div><br>
    <p><span style="font-family: 楷体; font-size: 18px;">Spring 框架：</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;前无古人，后无来者。它可以包容其他的一切框架。</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;a. 什么是Spring框架：</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;它是用于简化J2EE业务层开发的轻量级技术框架，他的核心是IOC和AOP</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;AOP：编程思想：面向对象: OOP</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 过程</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 服务：&nbsp;&nbsp; 分布式架构：SOA</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 切面的编程: AOP</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;b. 编码体验Spring 的强大之处：</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;作用：可以把普通的JavaBean魔术般的变为ejb</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;对象实例化的不同之处</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;c. 引入Spring框架</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Spring.jar : spring1.0-Spring5.0 (屹立不倒，而且越来越牛)</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;d. 使用的Spring框架（容器）来构建对象：</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;观察：实例化武器Weapon&nbsp;&nbsp; 实例化骑士Knight</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;利用Spring框架来实例化这两个对象</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;配置 xml/annocation：以前Spring框架都是利用XML来配置</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;，但是现在来看还是标注。并存的，看的懂，其实用xml配置更加灵活</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;，清晰，但是他比较繁琐，而标注比较简单</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;beans.xml --- src/main/resources</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;e. 在配置文件中配置你需要实例化的JavaBean</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Weapon&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Knight</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;f. 调用代码实例化Bean&nbsp;&nbsp; &nbsp;</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;原理： 工厂设计模式&nbsp; 反射机制</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;a.构建BeanFactory</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;ApplicationContext：其实就是那个工厂，他是创建Bean的工厂类</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;所以Spring框架利用了工厂设计模式，先构造出工厂类，然后工厂来实例化</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;他所管理的Bean。</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;b. 你要告诉这个工厂我要实例化哪些Bean传一个字符串来告诉工厂实例化的类</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Spring把要实例化的Bean写到了配置文件中，</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;然后利用XML的解析技术拿到要实例化累的相关信息，然后实例化相应的Bean</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;c. 类只要能参数化了，那么就可以把他写道配置文件，</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;然后就可以利用反射技术进行实例化Class.forName("类名")</span><br /><span style="font-family: 楷体; font-size: 18px;">结论：Spring是个大容器（工厂） 他去实例化你想要的Bean，也就是说你把Bean的生命周期纳入到Spring容器中去管理，</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;不是我们直接构造出来的，这种技术就交Spring的IOC技术。</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;IOC技术： 控制反转，也叫（依赖注入），他们说的一回事。</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;控制反转：Bean的生命周期不受你控制，而是交给Spring容器管理。</span><br /><span style="font-family: 楷体; font-size: 18px;">优势： 1. 解耦，完全可以面向接口编程</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;在代码中完全不用体现具体的实现类</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;2. 类配置在配置文件中，方便修改维护</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Spring容器对Bean的管理，默认是单例的。</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Spring框架用到那些设计模式：工厂模式&nbsp; 单例模式 代理设计模式</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;Spring框架如何利用IOC</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;(1). 实现了控制反转，Spring容器能帮我们实例化对象，但是并没有做到DI（依赖注入）//为我们提供依赖注入。</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;</span><br /><span style="font-family: 楷体; font-size: 18px;">配置Spring</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;xml来配置Bean，利用Spring容器来例化Bean（IOC）</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;Spring（4.0），Spring支持用标注的形式来配置</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;如何利用标注来实现Spring框架的IOC？</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;(1). 利用@Componet标注来注解你要纳入到Spring容器管理的类</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;(2). 写个配置类，要告诉Spring从哪些地方来找这些Bean</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;1. @Component 标注注解组件</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;2. @Configuration </span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; @ComponentScan("day")&nbsp;&nbsp; &nbsp;注明组件的位置,配置类相当于bean.xml配置文件</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; @Autowired&nbsp;&nbsp; 如果Spring容器检测到Weapon类的实例，就会自动注入进来</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; @Qualifier("axe")//-- 明确指定这个Bean</span><br /><span style="font-family: 楷体; font-size: 18px;">&nbsp;&nbsp; &nbsp;3. Spring容器获取Bean</span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h1><span style="font-family: 楷体; font-size: 18px;">使用XML构建Spring</span></h1>
<p>&nbsp;</p>
<h2><span style="font-family: 楷体; font-size: 18px;">1.beans.xml</span></h2>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">&lt;?</span><span style="color: #ff00ff;">xml version="1.0" encoding="UTF-8"</span><span style="color: #0000ff;">?&gt;</span>
<span style="color: #008080;"> 2</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">beans </span><span style="color: #ff0000;">xmlns</span><span style="color: #0000ff;">="http://www.springframework.org/schema/beans"</span>
<span style="color: #008080;"> 3</span> <span style="color: #ff0000;">    xmlns:xsi</span><span style="color: #0000ff;">="http://www.w3.org/2001/XMLSchema-instance"</span>
<span style="color: #008080;"> 4</span> <span style="color: #ff0000;">    xsi:schemaLocation</span><span style="color: #0000ff;">="http://www.springframework.org/schema/beans
</span><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">        http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 6</span>     <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 武器Bean类 </span><span style="color: #008000;">--&gt;</span>
<span style="color: #008080;"> 7</span> <span style="color: #008000;">   &lt;bean id="weapon" class="day01.Axe"&gt;&lt;/bean&gt;
</span><span style="color: #008080;"> 8</span> <span style="color: #008000;">    骑士Bean类
</span><span style="color: #008080;"> 9</span> <span style="color: #008000;">    &lt;bean id="knight" class="day01.Knight"&gt;
</span><span style="color: #008080;">10</span> <span style="color: #008000;">        骑士Bean的武器属性
</span><span style="color: #008080;">11</span> <span style="color: #008000;">            name="weapon" 的值一定要和Knight类的属性值一样
</span><span style="color: #008080;">12</span> <span style="color: #008000;">            ref="weapon" 的值一定要和你配置的武器类Bean 的ID 一样
</span><span style="color: #008080;">13</span>         
<span style="color: #008080;">14</span> <span style="color: #008000;">        &lt;property name="weapon" ref="weapon"&gt;&lt;/property&gt;
</span><span style="color: #008080;">15</span> <span style="color: #008000;">    &lt;/bean&gt; </span>
<span style="color: #008080;">21</span>     
<span style="color: #008080;">22</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">beans</span><span style="color: #0000ff;">&gt;</span></code></pre>

<h2>&nbsp;2.Weapon.java</h2>
<src class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> org.springframework.stereotype.Component;

</span><span style="color: #008000;">/**</span><span style="color: #008000;">
 * 武器类（接口）
 * </span><span style="color: #808080;">@author</span><span style="color: #008000;"> 
 *
 </span><span style="color: #008000;">*/</span>
<span style="color: #0000ff;">public</span> <span style="color: #0000ff;">interface</span><span style="color: #000000;"> Weapon {
    </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> fire();
}
</span><span style="color: #008000;">//</span><span style="color: #008000;">-- 斧头</span>

<span style="color: #0000ff;">class</span> Axe <span style="color: #0000ff;">implements</span><span style="color: #000000;"> Weapon{

    @Override
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> fire() {
        System.out.println(</span>"砍两下....."<span style="color: #000000;">);
    }
    
}

</span><span style="color: #0000ff;">class</span> Gun <span style="color: #0000ff;">implements</span><span style="color: #000000;"> Weapon{
    @Override
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> fire() {
        System.out.println(</span>"枪....."<span style="color: #000000;">);
    }
}</span></code></pre>

<p>&nbsp;</p>
<h2>3.Knight.java</h2>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.springframework.beans.factory.annotation.Autowired;
</span><span style="color: #008080;"> 2</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.springframework.beans.factory.annotation.Qualifier;
</span><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.springframework.stereotype.Component;
</span><span style="color: #008080;"> 4</span> 
<span style="color: #008080;"> 5</span> <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 6</span> <span style="color: #008000;"> * 骑士类
</span><span style="color: #008080;"> 7</span> <span style="color: #008000;"> * </span><span style="color: #808080;">@author</span><span style="color: #008000;"> 儿子
</span><span style="color: #008080;"> 8</span> <span style="color: #008000;"> *
</span><span style="color: #008080;"> 9</span>  <span style="color: #008000;">*/</span>
<span style="color: #008080;">10</span> 
<span style="color: #008080;">11</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Knight {
</span><span style="color: #008080;">12</span> 
<span style="color: #008080;">13</span>     <span style="color: #0000ff;">private</span><span style="color: #000000;"> Weapon weapon;
</span><span style="color: #008080;">14</span>     
<span style="color: #008080;">15</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> Knight() {}
</span><span style="color: #008080;">16</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> Knight(Weapon weapon) {
</span><span style="color: #008080;">17</span>         <span style="color: #0000ff;">this</span>.weapon =<span style="color: #000000;"> weapon;
</span><span style="color: #008080;">18</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">19</span>     
<span style="color: #008080;">20</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> setWeapon(Weapon weapon) {
</span><span style="color: #008080;">21</span>         <span style="color: #0000ff;">this</span>.weapon =<span style="color: #000000;"> weapon;
</span><span style="color: #008080;">22</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">23</span>     
<span style="color: #008080;">24</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> attack() {
</span><span style="color: #008080;">25</span> <span style="color: #000000;">        weapon.fire();
</span><span style="color: #008080;">26</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">27</span>     
<span style="color: #008080;">28</span>     
<span style="color: #008080;">29</span> }</code></pre>

<p>&nbsp;</p>
<h2>4.invoker.java</h2>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.springframework.context.ApplicationContext;
</span><span style="color: #008080;"> 2</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.springframework.context.annotation.AnnotationConfigApplicationContext;
</span><span style="color: #008080;"> 3</span> 
<span style="color: #008080;"> 4</span> <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 5</span> <span style="color: #008000;"> * 调用者
</span><span style="color: #008080;"> 6</span> <span style="color: #008000;"> * 
</span><span style="color: #008080;"> 7</span>  <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 8</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Invoker {
</span><span style="color: #008080;"> 9</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {
</span><span style="color: #008080;">10</span>         <span style="color: #008000;">/*</span><span style="color: #008000;"> 以下的代码是我们传统的构造Bean的方式
</span><span style="color: #008080;">11</span> <span style="color: #008000;">        //-- 1. 武器
</span><span style="color: #008080;">12</span> <span style="color: #008000;">        Weapon weapon = new Axe();
</span><span style="color: #008080;">13</span> <span style="color: #008000;">        //-- 2. 骑士
</span><span style="color: #008080;">14</span> <span style="color: #008000;">        Knight knight = new Knight(weapon);
</span><span style="color: #008080;">15</span> <span style="color: #008000;">        //-- 3. 骑士发起攻击
</span><span style="color: #008080;">16</span> <span style="color: #008000;">        knight.attack();
</span><span style="color: #008080;">17</span> <span style="color: #008000;">        //-- 4. 换武器：
</span><span style="color: #008080;">18</span> <span style="color: #008000;">           knight.setWeapon(new Gun());
</span><span style="color: #008080;">19</span> <span style="color: #008000;">        knight.attack();
</span><span style="color: #008080;">20</span>         <span style="color: #008000;">*/</span>
<span style="color: #008080;">21</span>         
<span style="color: #008080;">22</span>         <span style="color: #008000;">//</span><span style="color: #008000;">-- 利用Spring框架来构建Bean对象
</span><span style="color: #008080;">23</span>         <span style="color: #008000;">//</span><span style="color: #008000;">-- 1. 构造Spring容器对象(利用xml文件的配置)</span>
<span style="color: #008080;">24</span>         ApplicationContext ctx = <span style="color: #0000ff;">new</span> ClassPathXmlApplicationContext("beans.xml"<span style="color: #000000;">);
</span><span style="color: #008080;">25</span>     <span style="color: #008000;">//</span><span style="color: #008000;">-- 2. 通过Spring容器来获取想要的Bean</span>
<span style="color: #008080;">26</span>     Knight knight = (Knight)ctx.getBean("knight"<span style="color: #000000;">);
</span><span style="color: #008080;">27</span>     <span style="color: #008000;">//</span><span style="color: #008000;">-- 3. 骑士发起攻击</span>
<span style="color: #008080;">28</span> <span style="color: #000000;">    knight.attack();    
</span><span style="color: #008080;">29</span>     
<span style="color: #008080;">30</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">31</span> <span style="color: #000000;">}
</span><span style="color: #008080;">32</span>             </code></pre>

<p>&nbsp;</p>
<h1>使用注解构建Spring</h1>
<h2>&nbsp;1.Weapon.java</h2>
<src class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> org.springframework.stereotype.Component;

</span><span style="color: #008000;">/**</span><span style="color: #008000;">
 * 武器类（接口）
 * </span><span style="color: #808080;">@author</span><span style="color: #008000;"> 
 *
 </span><span style="color: #008000;">*/</span>
<span style="color: #0000ff;">public</span> <span style="color: #0000ff;">interface</span><span style="color: #000000;"> Weapon {
    </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> fire();
}
</span><span style="color: #008000;">//</span><span style="color: #008000;">-- 斧头</span>
@Component("axe"<span style="color: #000000;">)
</span><span style="color: #0000ff;">class</span> Axe <span style="color: #0000ff;">implements</span><span style="color: #000000;"> Weapon{

    @Override
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> fire() {
        System.out.println(</span>"砍两下....."<span style="color: #000000;">);
    }
    
}
@Component(</span>"gun"<span style="color: #000000;">)
</span><span style="color: #0000ff;">class</span> Gun <span style="color: #0000ff;">implements</span><span style="color: #000000;"> Weapon{
    @Override
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> fire() {
        System.out.println(</span>"枪....."<span style="color: #000000;">);
    }
}</span></code></pre>

<p>&nbsp;</p>
<h2>&nbsp;2.Knight.java</h2>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.springframework.beans.factory.annotation.Autowired;
</span><span style="color: #008080;"> 2</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.springframework.beans.factory.annotation.Qualifier;
</span><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.springframework.stereotype.Component;
</span><span style="color: #008080;"> 4</span> 
<span style="color: #008080;"> 5</span> <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 6</span> <span style="color: #008000;"> * 骑士类
</span><span style="color: #008080;"> 7</span> <span style="color: #008000;"> * </span><span style="color: #808080;">@author</span><span style="color: #008000;"> 儿子
</span><span style="color: #008080;"> 8</span> <span style="color: #008000;"> *
</span><span style="color: #008080;"> 9</span>  <span style="color: #008000;">*/</span>
<span style="color: #008080;">10</span> @Component("knight"<span style="color: #000000;">)
</span><span style="color: #008080;">11</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Knight {
</span><span style="color: #008080;">12</span>     @Autowired <span style="color: #008000;">//</span><span style="color: #008000;">- 如果Spring容器检测到Weapon类的实例，就会自动注入进来</span>
<span style="color: #008080;">13</span>     @Qualifier("axe")<span style="color: #008000;">//</span><span style="color: #008000;">-- 明确指定这个Bean</span>
<span style="color: #008080;">14</span>     <span style="color: #0000ff;">private</span><span style="color: #000000;"> Weapon weapon;
</span><span style="color: #008080;">15</span>     
<span style="color: #008080;">16</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> Knight() {}
</span><span style="color: #008080;">17</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> Knight(Weapon weapon) {
</span><span style="color: #008080;">18</span>         <span style="color: #0000ff;">this</span>.weapon =<span style="color: #000000;"> weapon;
</span><span style="color: #008080;">19</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">20</span>     
<span style="color: #008080;">21</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> setWeapon(Weapon weapon) {
</span><span style="color: #008080;">22</span>         <span style="color: #0000ff;">this</span>.weapon =<span style="color: #000000;"> weapon;
</span><span style="color: #008080;">23</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">24</span>     
<span style="color: #008080;">25</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> attack() {
</span><span style="color: #008080;">26</span> <span style="color: #000000;">        weapon.fire();
</span><span style="color: #008080;">27</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">28</span>     
<span style="color: #008080;">29</span>     
<span style="color: #008080;">30</span> }</code></pre>

<p>&nbsp;</p>
<h2>&nbsp;3.Weapon.java</h2>
<src class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> org.springframework.context.annotation.Bean;
</span><span style="color: #0000ff;">import</span><span style="color: #000000;"> org.springframework.context.annotation.ComponentScan;
</span><span style="color: #0000ff;">import</span><span style="color: #000000;"> org.springframework.context.annotation.Configuration;
</span><span style="color: #0000ff;">import</span><span style="color: #000000;"> org.springframework.stereotype.Component;

</span><span style="color: #008000;">/**</span><span style="color: #008000;">
 * Spring 容器的配置类，来代替那个Bean.xml文件
 * 1. 类上面使用@Component来注解
 * 2. 在配置类中使用@Bean 标注来注解你要实例化的类
 * </span><span style="color: #808080;">@author</span><span style="color: #008000;"> 
 *
 </span><span style="color: #008000;">*/</span><span style="color: #000000;">
@Configuration
@ComponentScan(</span>"day01")    <span style="color: #008000;">//</span><span style="color: #008000;">-- 告诉Spring从哪个包下寻找Component或者Bean</span>
<span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> BaseConfiguration {
    </span><span style="color: #008000;">/*</span><span style="color: #008000;">@Bean("a")
    public String A(){        //- 类似于@Component标注
        return "a";
    }
    
    @Bean("foo")
    public Foo foo() {
        return new Foo();
    }</span><span style="color: #008000;">*/</span><span style="color: #000000;">
}
    </span></code></pre>

<p>&nbsp;</p>
<h2>&nbsp;4.Invoker.java</h2>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.springframework.context.ApplicationContext;
</span><span style="color: #008080;"> 2</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.springframework.context.annotation.AnnotationConfigApplicationContext;
</span><span style="color: #008080;"> 3</span> 
<span style="color: #008080;"> 4</span> <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 5</span> <span style="color: #008000;"> * 调用者
</span><span style="color: #008080;"> 6</span> <span style="color: #008000;"> * 
</span><span style="color: #008080;"> 7</span>  <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 8</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Invoker {
</span><span style="color: #008080;"> 9</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {
</span><span style="color: #008080;">10</span>         <span style="color: #008000;">/*</span><span style="color: #008000;"> 以下的代码是我们传统的构造Bean的方式
</span><span style="color: #008080;">11</span> <span style="color: #008000;">        //-- 1. 武器
</span><span style="color: #008080;">12</span> <span style="color: #008000;">        Weapon weapon = new Axe();
</span><span style="color: #008080;">13</span> <span style="color: #008000;">        //-- 2. 骑士
</span><span style="color: #008080;">14</span> <span style="color: #008000;">        Knight knight = new Knight(weapon);
</span><span style="color: #008080;">15</span> <span style="color: #008000;">        //-- 3. 骑士发起攻击
</span><span style="color: #008080;">16</span> <span style="color: #008000;">        knight.attack();
</span><span style="color: #008080;">17</span> <span style="color: #008000;">        //-- 4. 换武器：
</span><span style="color: #008080;">18</span> <span style="color: #008000;">        knight.setWeapon(new Gun());
</span><span style="color: #008080;">19</span> <span style="color: #008000;">        knight.attack();
</span><span style="color: #008080;">20</span>         <span style="color: #008000;">*/</span>
<span style="color: #008080;">21</span>         
<span style="color: #008080;">22</span>     
<span style="color: #008080;">23</span>         <span style="color: #008000;">//</span><span style="color: #008000;">-- 1.构造Spring容器</span>
<span style="color: #008080;">24</span>         ApplicationContext ctx = 
<span style="color: #008080;">25</span>                 <span style="color: #0000ff;">new</span> AnnotationConfigApplicationContext(BaseConfiguration.<span style="color: #0000ff;">class</span><span style="color: #000000;">);
</span><span style="color: #008080;">26</span>         <span style="color: #008000;">//</span><span style="color: #008000;">-- 2. 获取Bean</span>
<span style="color: #008080;">27</span>         
<span style="color: #008080;">28</span>         Knight knight = (Knight)ctx.getBean("knight"<span style="color: #000000;">);
</span><span style="color: #008080;">29</span> <span style="color: #008000;">//</span><span style="color: #008000;">        System.out.println(ctx.toString());</span>
<span style="color: #008080;">30</span> <span style="color: #000000;">        knight.attack();
</span><span style="color: #008080;">31</span>         
<span style="color: #008080;">32</span> <span style="color: #008000;">//</span><span style="color: #008000;">        Axe axe = (Axe)ctx.getBean("axe");
</span><span style="color: #008080;">33</span> <span style="color: #008000;">//</span><span style="color: #008000;">        System.out.println(axe);
</span><span style="color: #008080;">34</span> <span style="color: #008000;">//</span><span style="color: #008000;">        axe.fire();</span>
<span style="color: #008080;">35</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">36</span> }</code></pre>

<p>&nbsp;</p>

</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>