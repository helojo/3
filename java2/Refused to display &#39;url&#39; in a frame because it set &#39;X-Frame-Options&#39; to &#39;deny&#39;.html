<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Refused to display &#39;url&#39; in a frame because it set &#39;X-Frame-Options&#39; to &#39;deny&#39;' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Refused to display &#39;url&#39; in a frame because it set &#39;X-Frame-Options&#39; to &#39;deny&#39;</center></div><div class='banquan'>原文出处:本文由博客园博主天涯越野提供。<br/>
原文连接:https://www.cnblogs.com/weiapro/p/11521695.html</div><br>
    <p>使用iframe嵌入网页，浏览器报错：Refused to display 'url' in a frame because it set 'X-Frame-Options' to 'deny'。<br />
这是SpringSecurity 防止恶意注入，所以设置了 X-Frame-Options 为deny，网上看到是 加入 httpSecurity.headers().frameOptions().disable();</p>
<p>如：<a href="https://blog.csdn.net/a494567309/article/details/80348557">https://blog.csdn.net/a494567309/article/details/80348557</a></p>
<p>但是我是在 spring-security.xml 配置，所以不用这种，在spring-security.xml 添加<span style="color: #ff0000;">&lt;security:headers disabled="true"/&gt;</span></p>
<pre><code>整个 spring-security.xml配置如下</code></pre>
<src class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;?</span>xml version="1.0" encoding="UTF-8"<span style="color: #0000ff;">?&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">beans</span> <span style="color: #ff0000;">xmlns</span>=<span style="color: #0000ff;">"http://www.springframework.org/schema/beans"</span>
       <span style="color: #ff0000;">xmlns</span>:<span style="color: #ff0000;">security</span>=<span style="color: #0000ff;">"http://www.springframework.org/schema/security"</span>
       <span style="color: #ff0000;">xmlns</span>:<span style="color: #ff0000;">xsi</span>=<span style="color: #0000ff;">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span style="color: #ff0000;">xsi</span>:<span style="color: #ff0000;">schemaLocation</span>=<span style="color: #0000ff;">"http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/security
    http://www.springframework.org/schema/security/spring-security.xsd"</span><span style="color: #0000ff;">&gt;</span>

    <span style="color: #008000;">&lt;!-- 配置不拦截的资源 --&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #c71585;">security</span>:<span style="color: #800000;">http</span> <span style="color: #ff0000;">pattern</span>=<span style="color: #0000ff;">"/login.jsp"</span> <span style="color: #ff0000;">security</span>=<span style="color: #0000ff;">"none"</span><span style="color: #0000ff;">/&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #c71585;">security</span>:<span style="color: #800000;">http</span> <span style="color: #ff0000;">pattern</span>=<span style="color: #0000ff;">"/css/**"</span> <span style="color: #ff0000;">security</span>=<span style="color: #0000ff;">"none"</span><span style="color: #0000ff;">/&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #c71585;">security</span>:<span style="color: #800000;">http</span> <span style="color: #ff0000;">pattern</span>=<span style="color: #0000ff;">"/img/**"</span> <span style="color: #ff0000;">security</span>=<span style="color: #0000ff;">"none"</span><span style="color: #0000ff;">/&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #c71585;">security</span>:<span style="color: #800000;">http</span> <span style="color: #ff0000;">pattern</span>=<span style="color: #0000ff;">"/js/**"</span> <span style="color: #ff0000;">security</span>=<span style="color: #0000ff;">"none"</span><span style="color: #0000ff;">/&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #c71585;">security</span>:<span style="color: #800000;">http</span> <span style="color: #ff0000;">pattern</span>=<span style="color: #0000ff;">"/plugins/**"</span> <span style="color: #ff0000;">security</span>=<span style="color: #0000ff;">"none"</span><span style="color: #0000ff;">/&gt;</span>
    <span style="color: #008000;">&lt;!--
    	配置具体的规则
    	auto-config="true"	不用自己编写登录的页面，框架提供默认登录页面
    	use-expressions="false"	是否使用SPEL表达式
    --&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #c71585;">security</span>:<span style="color: #800000;">http</span> <span style="color: #ff0000;">auto</span>-<span style="color: #ff0000;">config</span>=<span style="color: #0000ff;">"true"</span> <span style="color: #ff0000;">use</span>-<span style="color: #ff0000;">expressions</span>=<span style="color: #0000ff;">"true"</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #008000;">&lt;!-- 配置具体的拦截的规则 pattern="请求路径的规则" access="访问系统的人，必须有ROLE_USER或者ROLE_ADMIN的角色" --&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #c71585;">security</span>:<span style="color: #800000;">intercept</span>-<span style="color: #ff0000;">url</span> <span style="color: #ff0000;">pattern</span>=<span style="color: #0000ff;">"/**"</span> <span style="color: #ff0000;">access</span>=<span style="color: #0000ff;">"hasAnyRole('ROLE_USER','ROLE_ADMIN')"</span><span style="color: #0000ff;">/&gt;</span>

        <span style="color: #008000;">&lt;!-- 定义跳转的具体的页面 --&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #c71585;">security</span>:<span style="color: #800000;">form</span>-<span style="color: #ff0000;">login</span>
                <span style="color: #ff0000;">login</span>-<span style="color: #ff0000;">page</span>=<span style="color: #0000ff;">"/login.jsp"</span>
                <span style="color: #ff0000;">login</span>-<span style="color: #ff0000;">processing</span>-<span style="color: #ff0000;">url</span>=<span style="color: #0000ff;">"/login.do"</span>
                <span style="color: #ff0000;">default</span>-<span style="color: #ff0000;">target</span>-<span style="color: #ff0000;">url</span>=<span style="color: #0000ff;">"/index.jsp"</span>
                <span style="color: #ff0000;">authentication</span>-<span style="color: #ff0000;">failure</span>-<span style="color: #ff0000;">handler</span>-<span style="color: #ff0000;">ref</span>=<span style="color: #0000ff;">"authenticationFailureHandler"</span>
                <span style="color: #ff0000;">authentication</span>-<span style="color: #ff0000;">success</span>-<span style="color: #ff0000;">handler</span>-<span style="color: #ff0000;">ref</span>=<span style="color: #0000ff;">"authenticationSuccessHandler"</span>
        <span style="color: #0000ff;">/&gt;</span>

        <span style="color: #008000;">&lt;!-- 关闭跨域请求 --&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #c71585;">security</span>:<span style="color: #800000;">csrf</span> <span style="color: #ff0000;">disabled</span>=<span style="color: #0000ff;">"true"</span><span style="color: #0000ff;">/&gt;</span>
        <span style="color: #008000;">&lt;!-- 退出 --&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #c71585;">security</span>:<span style="color: #800000;">logout</span> <span style="color: #ff0000;">invalidate</span>-<span style="color: #ff0000;">session</span>=<span style="color: #0000ff;">"true"</span> <span style="color: #ff0000;">logout</span>-<span style="color: #ff0000;">url</span>=<span style="color: #0000ff;">"/logout.do"</span> <span style="color: #ff0000;">logout</span>-<span style="color: #ff0000;">success</span>-<span style="color: #ff0000;">url</span>=<span style="color: #0000ff;">"/login.jsp"</span><span style="color: #0000ff;">/&gt;</span>

        <span style="color: #008000;">&lt;!-- Refused to display 'url' in a frame because it set 'X-Frame-Options' to 'deny'. 如果用iframe提示这个，设置为true--&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #c71585;">security</span>:<span style="color: #800000;">headers</span> <span style="color: #ff0000;">disabled</span>=<span style="color: #0000ff;">"true"</span><span style="color: #0000ff;">/&gt;</span>
    <span style="color: #0000ff;">&lt;/</span><span style="color: #c71585;">security</span>:<span style="color: #800000;">http</span><span style="color: #0000ff;">&gt;</span>

    <span style="color: #008000;">&lt;!-- 切换成数据库中的用户名和密码 --&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #c71585;">security</span>:<span style="color: #800000;">authentication</span>-<span style="color: #ff0000;">manager</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #c71585;">security</span>:<span style="color: #800000;">authentication</span>-<span style="color: #ff0000;">provider</span> <span style="color: #ff0000;">ref</span>=<span style="color: #0000ff;">"authenticationProvider"</span><span style="color: #0000ff;">/&gt;</span>
    <span style="color: #0000ff;">&lt;/</span><span style="color: #c71585;">security</span>:<span style="color: #800000;">authentication</span>-manager<span style="color: #0000ff;">&gt;</span>

    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">bean</span> <span style="color: #ff0000;">id</span>=<span style="color: #0000ff;">"authenticationProvider"</span> <span style="color: #ff0000;">class</span>=<span style="color: #0000ff;">"org.springframework.security.authentication.dao.DaoAuthenticationProvider"</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property</span> <span style="color: #ff0000;">name</span>=<span style="color: #0000ff;">"userDetailsService"</span> <span style="color: #ff0000;">ref</span>=<span style="color: #0000ff;">"managerService"</span> <span style="color: #0000ff;">/&gt;</span>
        <span style="color: #008000;">&lt;!-- 是否隐藏用户没有找到的异常,默认为true ; 这里返回用户不存在 --&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property</span> <span style="color: #ff0000;">name</span>=<span style="color: #0000ff;">"hideUserNotFoundExceptions"</span> <span style="color: #ff0000;">value</span>=<span style="color: #0000ff;">"false"</span> <span style="color: #0000ff;">/&gt;</span>
        <span style="color: #008000;">&lt;!-- 配置加密的方式--&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property</span> <span style="color: #ff0000;">name</span>=<span style="color: #0000ff;">"passwordEncoder"</span> <span style="color: #ff0000;">ref</span>=<span style="color: #0000ff;">"passwordEncoder"</span> <span style="color: #0000ff;">/&gt;</span>
    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">bean</span><span style="color: #0000ff;">&gt;</span>

    <span style="color: #008000;">&lt;!-- 配置加密类 --&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">bean</span> <span style="color: #ff0000;">id</span>=<span style="color: #0000ff;">"passwordEncoder"</span> <span style="color: #ff0000;">class</span>=<span style="color: #0000ff;">"org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder"</span><span style="color: #0000ff;">/&gt;<br /></span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">bean</span> <span style="color: #ff0000;">id</span>=<span style="color: #0000ff;">"authenticationFailureHandler"</span> <span style="color: #ff0000;">class</span>=<span style="color: #0000ff;">"com.handler.AuthenticationFailureHandler"</span><span style="color: #0000ff;">/&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">bean</span> <span style="color: #ff0000;">id</span>=<span style="color: #0000ff;">"authenticationSuccessHandler"</span> <span style="color: #ff0000;">class</span>=<span style="color: #0000ff;">"com.handler.AuthenticationSuccessHandler"</span><span style="color: #0000ff;">/&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">beans</span><span style="color: #0000ff;">&gt;</span>
</code></pre>

<p>&nbsp;</p>
<p>重启就行了</p>

</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>