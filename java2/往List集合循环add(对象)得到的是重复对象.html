<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修往List集合循环add(对象)得到的是重复对象' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>往List集合循环add(对象)得到的是重复对象</center></div><div class='banquan'>原文出处:本文由博客园博主DC红茶提供。<br/>
原文连接:https://www.cnblogs.com/-qilin/p/11507495.html</div><br>
    <p><strong>记录每次的错误，强大是慢慢的积累</strong>，先看看代码，</p>
<p><img src="./images/往List集合循环add(对象)得到的是重复对象0.png" alt="" width="568" height="211" /></p>
<pre><code>往list中循环添加RoleKungFu对象，看似没有问题，结果打印则显示：</code></pre>
<p><img src="./images/往List集合循环add(对象)得到的是重复对象1.png" alt="" width="617" height="314" /></p>
<pre><code><strong>　　全部是重复的数据！</strong>这是因为啥呢，因为将<strong>对象add入list中时，放入list中的其实是对象的引用，</strong>虽然每次都有重新的set和get,但是实质上是同一个对象，<br />每次都是重新的赋值后覆盖之前的数据，所以循环的都是重复数据，换一句说，<strong>new这个关键字是开辟堆内存空间的</strong>，上图只new了一次，所以只开辟一块内存空间，<br />这个时候的对象地址是唯一的，所以操作的永远是这块内存上的对象，只是对其的属性赋值并没其他操作，那么解决的办法就很明显了，我可以多"new"几个对象，<br />有了不同的内存地址，操作的就是不同的对象了，所以可以将上图的实例化操作放入循环中，每次循环都重新实例化，效果如下</code></pre>
<p><img src="./images/往List集合循环add(对象)得到的是重复对象2.png" alt="" width="629" height="197" /></p>
<pre><code>这样的结果如下：</code></pre>
<p><img src="./images/往List集合循环add(对象)得到的是重复对象3.png" alt="" width="523" height="377" /></p>
<pre><code>至此，解决了问题，说句题外话，new是造成耦合性的最大元凶。</code></pre>

</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>